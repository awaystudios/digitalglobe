{
  "version": 3,
  "sources": [
    "node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "src/GlobeFacade.ts",
    "src/away3d/Away3DDataVisView.ts",
    "src/away3d/RotationController.ts",
    "src/away3d/geometry/ConeDataShape.ts",
    "src/away3d/geometry/DataVisRenderable.ts",
    "src/away3d/geometry/DataVisSubRenderable.ts",
    "src/away3d/geometry/PyramidDataShape.ts",
    "src/away3d/glsl/ContextGLSL.ts",
    "src/away3d/glsl/GLSLCompiler.ts",
    "src/away3d/glsl/GLSLMaterialPass.ts",
    "src/away3d/glsl/GLSLRenderer.ts",
    "src/away3d/glsl/GLSLShaderObject.ts",
    "src/away3d/glsl/ProgramGLSL.ts",
    "src/away3d/glsl/StageHack.ts",
    "src/away3d/rendering/DataVisMaterial.ts",
    "src/away3d/rendering/DataVisPass.ts",
    "src/away3d/rendering/GlobePass.ts",
    "src/away3d/rendering/HaloMaterial.ts",
    "src/away3d/rendering/HaloPass.ts",
    "src/data/WorldData.ts",
    "src/data/WorldDataElement.ts",
    "src/data/WorldDataEvent.ts",
    "src/data/WorldDataSet.ts"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "import AwayEvent                    = require(\"awayjs-core/lib/events/Event\");\nimport URLLoader                    = require(\"awayjs-core/lib/net/URLLoader\");\nimport URLLoaderDataFormat            = require(\"awayjs-core/lib/net/URLLoaderDataFormat\");\nimport URLRequest                    = require(\"awayjs-core/lib/net/URLRequest\");\nimport ParserUtils                    = require(\"awayjs-core/lib/parsers/ParserUtils\");\nimport ImageTexture                    = require(\"awayjs-core/lib/textures/ImageTexture\");\n\nimport Away3DDataVisView            = require(\"./away3d/Away3DDataVisView\");\n\nimport WorldData                    = require(\"./data/WorldData\");\nimport WorldDataSet                 = require(\"./data/WorldDataSet\");\nimport WorldDataEvent               = require(\"./data/WorldDataEvent\");\nimport WorldDataElement             = require(\"./data/WorldDataElement\");\n\nclass GlobeFacade {\n    private _dataVisSphere:Away3DDataVisView;\n    private _viewType:string;\n    private _handSet:string;\n    private _handSetColor:string;\n    private _timeType:string;\n    private _worldData:WorldData;\n    private _canvasTargetName:string;\n    private _autoRotate:boolean;\n    private _autoCycleTime:boolean;\n    private _hour:number;\n    private _highValue:number;\n    private _showViewCallback:Function;\n    /**\n     * Constructor\n     */\n    constructor()\n    {\n    }\n\n    /**\n     */\n    public init(canvasTargetName:string, handSet:string, handSetColor:string, viewType:string, highValue:number, showViewCallback:Function):void {\n        this._canvasTargetName = canvasTargetName;\n        this._handSet = handSet;\n        this._handSetColor = handSetColor;\n        this._viewType = viewType;\n        this._highValue = highValue;\n        this._showViewCallback = showViewCallback;\n\n        this._worldData = new WorldData();\n        this._worldData.addEventListener(WorldDataEvent.LOADED, (event:any) => this.onCountryLoaded(event));\n        this._worldData.addEventListener(WorldDataEvent.NO_COUNTRY_DATA, (event:any) => this.onNoCountryLoaded(event));\n        this._worldData.addEventListener(WorldDataEvent.NO_VENDOR_DATA, (event:any) => this.onNoVendorLoaded(event));\n        this.loadViewData();\n    }\n\n    private loadViewData():void {\n        this._worldData.load(this._viewType, this._handSet, this._timeType);\n    }\n\n    private onNoVendorLoaded(event:WorldDataEvent):void {\n        console.warn(\"Nothing vendor data\");\n        this.showData(event.data);\n    }\n\n    private onNoCountryLoaded(event:WorldDataEvent):void {\n        console.warn(\"No country data\");\n        this.showData(event.data, true);\n    }\n\n    private onCountryLoaded(event:WorldDataEvent):void {\n        if (!this._dataVisSphere) {\n            this._dataVisSphere = new Away3DDataVisView(this._canvasTargetName);\n            this._dataVisSphere.hour = this._hour;\n            this._dataVisSphere.autoCycleTime = this._autoCycleTime;\n            this._dataVisSphere.autoRotate = this._autoRotate;\n            this._dataVisSphere.addEventListener(WorldDataEvent.FIND_LOCATION, (event:any)=> this.onFindLocation(event));\n            this._dataVisSphere.addEventListener(WorldDataEvent.SHOW_GLOBAL_LOCATION, (event:any)=> this.onShowGlobal(event));\n            if(this._dataVisSphere) {\n                this._dataVisSphere.color = this._handSetColor;\n            }\n        }\n\n        this.showData(event.data);\n    }\n\n    private onShowGlobal(event:WorldDataEvent):void{\n        this._showViewCallback(0);\n    }\n\n    private onFindLocation(event:WorldDataEvent):void{\n        var id:string = this._worldData.getNearestLocation(event.x, event.y, event.z, event.sphereRadius);\n        if(id == this._viewType) {\n            id = \"0\";\n        }\n        this._showViewCallback(id);\n    }\n\n    private showData(data:WorldDataSet, forceGlobalView:Boolean = false):void\n    {\n        if (this._viewType == \"0\" || forceGlobalView) {\n            this._dataVisSphere.setGlobalData(data);\n            this._dataVisSphere.showGlobalView();\n        }\n        else {\n            this._dataVisSphere.showLocalView(data);\n        }\n    }\n\n    public setViewType(value:string, highValue:number):void\n    {\n        if (this._viewType == value) return;\n        this._viewType = value;\n        this._highValue = highValue;\n        this.loadViewData();\n    }\n\n    public setTimeType(value:string):void\n    {\n        if (this._timeType == value) return;\n        this._timeType = value;\n        this.loadViewData();\n    }\n\n    public setHandSet(value:string, color:string):void\n    {\n        if (this._handSetColor != color) {\n            this._handSetColor = color;\n            if(this._dataVisSphere) {\n                this._dataVisSphere.color = this._handSetColor;\n            }\n        }\n\n        if (this._handSet != value) {\n            this._handSet = value;\n            this.loadViewData();\n        }\n    }\n\n    public setTimelineRatio(t:number):void\n    {\n        this._hour = t * 24;\n\n        if (this._dataVisSphere)\n            this._dataVisSphere.hour = this._hour;\n    }\n\n    public setAutoCycleTime(value:boolean):void\n    {\n        this._autoCycleTime = value;\n\n        if (this._dataVisSphere)\n            this._dataVisSphere.autoCycleTime = value;\n\n    }\n\n    public setAutoRotate(value:boolean):void\n    {\n        this._autoRotate = value;\n\n        if (this._dataVisSphere)\n            this._dataVisSphere.autoRotate = value;\n    }\n}\n\nwindow.onload = function ()\n{\n    // HACK, to fix\n    window[\"globeFacade\"] = new GlobeFacade();\n}",
    "import EventDispatcher              = require(\"awayjs-core/lib/events/EventDispatcher\");\nimport Quaternion\t\t\t\t    = require(\"awayjs-core/lib/geom/Quaternion\");\nimport Vector3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport RequestAnimationFrame\t\t= require(\"awayjs-core/lib/utils/RequestAnimationFrame\");\nimport PerspectiveProjection\t\t= require(\"awayjs-core/lib/projections/PerspectiveProjection\");\nimport View\t\t\t\t\t\t\t= require(\"awayjs-display/lib/containers/View\");\nimport Mesh\t\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Mesh\");\nimport ImageTexture\t\t\t\t\t= require(\"awayjs-core/lib/textures/ImageTexture\");\nimport PrimitiveSpherePrefab\t\t= require(\"awayjs-display/lib/prefabs/PrimitiveSpherePrefab\");\nimport PrimitivePlanePrefab\t\t    = require(\"awayjs-display/lib/prefabs/PrimitivePlanePrefab\");\nimport TriangleMethodMaterial\t\t= require(\"awayjs-methodmaterials/lib/TriangleMethodMaterial\");\nimport RaycastPicker\t\t\t\t= require(\"awayjs-display/lib/pick/RaycastPicker\");\nimport ShaderPicker\t\t\t\t    = require(\"awayjs-renderergl/lib/pick/ShaderPicker\");\nimport PickingCollisionVO\t\t\t= require(\"awayjs-display/lib/pick/PickingCollisionVO\");\nimport TriangleBasicMaterial        = require(\"awayjs-renderergl/lib/materials/TriangleBasicMaterial\");\nimport JSPickingCollider\t\t\t= require(\"awayjs-renderergl/lib/pick/JSPickingCollider\");\n\nimport DataVisMaterial\t\t\t\t= require(\"./rendering/DataVisMaterial\");\nimport HaloMaterial\t\t\t\t    = require(\"./rendering/HaloMaterial\");\nimport GLSLRenderer\t\t\t\t\t= require(\"./glsl/GLSLRenderer\");\nimport StageHack\t\t\t\t\t= require(\"./glsl/StageHack\");\nimport DataVisRenderable\t\t\t= require(\"./geometry/DataVisRenderable\");\nimport ConeDataShape\t\t\t\t= require(\"./geometry/ConeDataShape\");\n\nimport RotationController\t\t\t= require(\"./RotationController\");\nimport WorldDataElement\t\t\t\t= require(\"./../data/WorldDataElement\");\nimport WorldDataSet\t\t\t\t    = require(\"./../data/WorldDataSet\");\nimport WorldDataEvent               = require(\"./../data/WorldDataEvent\");\n\nclass Away3DDataVisView extends EventDispatcher\n{\n    private _view:View;\n    private _cameraController:RotationController;\n    private _timer:RequestAnimationFrame;\n    private _lastLongitude:number;\n    private _lastLatitude:number;\n    private _lastMouseX:number = 0;\n    private _lastMouseY:number = 0;\n    private _move:boolean;\n    private _mouseMoved:boolean;\n    private _zoom:boolean;\n    private _targetLocalLong:number;\n    private _targetLocalLat:number;\n    private _defaultGlobalCamDistance:number = 80;\n    private _targetCamDistance:number;\n    private _dataVisMaterial:DataVisMaterial;\n    private _globalDataVisRenderable:DataVisRenderable;\n    private _globalMaxValue:number;\n    private _localDataVisRenderable:DataVisRenderable = null;\n    private _rotationSpeed:number = .02;    // degrees / ms\n    private _autoRotate:boolean = false;\n    private _autoCycleTime:boolean = false;\n    private _autoCycleTimeSpeed:number = 1/4000;    // h / ms\n    private _viewTypeInertia:number = .93;\n    private _sphereRadius:number = 30;\n    private _zoomInitFingerDistance:number = 0;\n    private _refZoomDistance:number = 0;\n    private _minDistance:number = 40;\n    private _maxDistance:number = 200;\n    // this is NOT the same as the pivot point!\n    private _lookAtTarget:Vector3D = new Vector3D();\n    private _canvasContainer:HTMLDivElement;\n    private _haloMesh:Mesh;\n\n    constructor(divID : string)\n    {\n        super();\n        this._canvasContainer = <HTMLDivElement> document.getElementById(divID);\n        this.initEngine();\n        this.initObject();\n        this.initListeners();\n    }\n\n    get autoRotate() : boolean { return this._autoRotate; }\n    set autoRotate(value : boolean) { this._autoRotate = value; }\n\n    get autoRotateSpeed() : number { return this._rotationSpeed; }\n    set autoRotateSpeed(value : number) { this._rotationSpeed = value; }\n\n    // does this belong here, really? I suppose it will also involve updating the UI hour indicator?\n    get autoCycleTime() : boolean { return this._autoCycleTime; }\n    set autoCycleTime(value : boolean) { this._autoCycleTime = value; }\n\n    get autoCycleTimeSpeed() : number { return this._autoCycleTimeSpeed; }\n    set autoCycleTimeSpeed(value : number) { this._autoCycleTimeSpeed = value; }\n\n    get hour() : number { return this._dataVisMaterial.hour; }\n    set hour(value : number) { this._dataVisMaterial.hour = value; }\n\n\n    set color(value : string) {\n        if( this._dataVisMaterial) {\n            this._dataVisMaterial.maxColor = parseInt(\"0x\"+value);\n            this._dataVisMaterial.minColor = parseInt(\"0x\"+value);\n        }\n    }\n\n    private initEngine()\n    {\n        StageHack.INIT();\n        //create the view\n        this._view = new View(new GLSLRenderer());\n        this._view.backgroundColor = 0x202020;\n\n        var child = this._view[\"_htmlElement\"];\n\n        document.body.removeChild(child);\n        this._canvasContainer.appendChild(child);\n\n        //create custom lens\n        this._view.camera.projection = new PerspectiveProjection(70);\n        this._view.camera.projection.far = 5000;\n        this._view.camera.projection.near = 1;\n        this._view.mousePicker = new RaycastPicker(false);\n\n        //setup controller to be used on the camera\n        this._cameraController = new RotationController(this._view.camera);\n        this._cameraController.latitude = 0;\n        this._cameraController.longitude = 0;\n        this._cameraController.autoUpdate = false;\n        this._targetCamDistance = this._cameraController.distance = this._defaultGlobalCamDistance;\n        this._lookAtTarget.x = 0;\n        this._lookAtTarget.y = 0;\n        this._lookAtTarget.z = 0;\n    }\n\n    private getURLParameter(name) : string\n    {\n        return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,\"\"])[1].replace(/\\+/g, '%20')) || null;\n    }\n\n    /**\n     * Sets the global data. Required!\n     */\n    public setGlobalData(data:WorldDataSet):void\n    {\n        console.log(\"setGlobalData\");\n        if (this._globalDataVisRenderable) this._globalDataVisRenderable.dispose();\n\n        this._globalDataVisRenderable = this.createDataVisRenderable(data);\n        this._globalMaxValue = data.maxElementValue;\n        this._dataVisMaterial.dataVisRenderable = this._globalDataVisRenderable;\n        this._dataVisMaterial.maxValue = this._globalMaxValue;\n    }\n\n    /**\n     * Focuses on a more local view (fe: country)\n     */\n    public showLocalView(data:WorldDataSet):void\n    {\n        if (this._localDataVisRenderable)\n            this._localDataVisRenderable.dispose();\n\n        this._localDataVisRenderable = this.createDataVisRenderable(data, .2);\n        this._dataVisMaterial.dataVisRenderable = this._localDataVisRenderable;\n        this._dataVisMaterial.maxValue = data.maxElementValue;\n\n        this.focusCameraOnLocal();\n    }\n\n    private createDataVisRenderable(data:WorldDataSet, radius = .5, heightRatio = 10)\n    {\n        return new DataVisRenderable(data, new ConeDataShape(radius, radius * heightRatio, 10));\n    }\n\n    public showGlobalView():void\n    {\n        this._dataVisMaterial.dataVisRenderable = this._globalDataVisRenderable;\n\n        if (this._localDataVisRenderable) {\n            this._localDataVisRenderable.dispose();\n            this._localDataVisRenderable = null;\n        }\n\n        this._targetCamDistance = this._defaultGlobalCamDistance;\n    }\n\n    public get isInLocalView():boolean\n    {\n        return this._localDataVisRenderable != null;\n    }\n\n    private initObject():void\n    {\n        var sphere = new PrimitiveSpherePrefab(this._sphereRadius / 3.0, 32, 24);\n        var mesh = <Mesh>sphere.getNewObject();\n        var image = document.getElementById(\"mapImage\");\n\n        var gradient : string = this.getURLParameter(\"gradient\");\n\n        mesh.material = this._dataVisMaterial = new DataVisMaterial(gradient == \"1\" || gradient == \"true\");\n        mesh.pickingCollider = new JSPickingCollider(true);\n\n        this._dataVisMaterial.texture = new ImageTexture(<HTMLImageElement> image, false);\n        var color : string = this.getURLParameter(\"minColor\");\n        if (color)\n            this._dataVisMaterial.minColor = parseInt(\"0x\" + color);\n        if (color)\n            this._dataVisMaterial.maxColor = parseInt(\"0x\" + this.getURLParameter(\"maxColor\"));\n        mesh.scaleX = mesh.scaleY = mesh.scaleZ = 3.0;\n        this._view.scene.addChild(mesh);\n\n        var plane = new PrimitivePlanePrefab(this._sphereRadius * 2.25, this._sphereRadius * 2.25, 1, 1, false, true);\n        this._haloMesh = <Mesh>plane.getNewObject();\n        var image = document.getElementById(\"haloImage\");\n        this._haloMesh.material = new HaloMaterial(new ImageTexture(<HTMLImageElement> image, false));\n        this._haloMesh.mouseEnabled = false;\n        this._haloMesh.mouseChildren = false;\n        this._view.scene.addChild(this._haloMesh);\n    }\n\n    private focusCameraOnCountry(viewX:number, viewY:number):void {\n        var collidingObject:PickingCollisionVO = this._view.mousePicker.getViewCollision(viewX, viewY, this._view);\n        if(collidingObject){\n            var pos = collidingObject.displayObject.sceneTransform.transformVector(collidingObject.localPosition);\n            var lat:number = -Math.asin(-pos.y/this._sphereRadius)*180/Math.PI;\n            var lon:number = Math.asin(-pos.x/(Math.cos(lat)*this._sphereRadius))*180/Math.PI;\n            var worldEvent:WorldDataEvent = new WorldDataEvent(WorldDataEvent.FIND_LOCATION);\n            worldEvent.lat = lat;\n            worldEvent.long = lon;\n            worldEvent.x = pos.x;\n            worldEvent.y = pos.y;\n            worldEvent.z = pos.z;\n            worldEvent.sphereRadius = this._sphereRadius;\n            this.dispatchEvent(worldEvent);\n        }else{\n            this.dispatchEvent(new WorldDataEvent(WorldDataEvent.SHOW_GLOBAL_LOCATION));\n        }\n    }\n\n    private focusCameraOnLocal():void\n    {\n        var subRenderable = this._localDataVisRenderable.getSubRenderable(0);\n        var minLat : number = subRenderable.minLat;\n        var maxLat : number = subRenderable.maxLat;\n        var minLong : number = subRenderable.minLong;\n        var maxLong : number = subRenderable.maxLong;\n        var len : number = this._localDataVisRenderable.numSubRenderables;\n\n        for (var i : number = 1; i < len; ++i) {\n            subRenderable = this._localDataVisRenderable.getSubRenderable(i);\n            minLat = Math.min(subRenderable.minLat, minLat);\n            maxLat = Math.max(subRenderable.maxLat, maxLat);\n            minLong = Math.min(subRenderable.minLong, minLong);\n            maxLong = Math.max(subRenderable.maxLong, maxLong);\n        }\n\n        var focusLong : number = (minLong + maxLong) * .5;\n        var focusLat : number = (minLat + maxLat) * .5;\n\n        // assuming there is no country that spans over half of the world in longitude ;)\n        // NO, NOT EVEN YOU, RUSSIA!\n        if (maxLong - minLong > 180)\n            focusLong = 180 + focusLong;\n\n        // TODO: use angular distance of lat/long bounds to know how far we can zoom\n        var radX : number = focusLat * Math.PI / 180;\n        var radY : number = focusLong * Math.PI / 180;\n        var sinX : number = Math.sin(radX);\n        var cosX : number = Math.cos(radX);\n        var sinY : number = Math.sin(radY);\n        var cosY : number = Math.cos(radY);\n\n        var avgX = -sinY * cosX * this._sphereRadius;\n        var avgY = -sinX * this._sphereRadius;\n        var avgZ = cosY * cosX * this._sphereRadius;\n\n        this._targetLocalLong = focusLong - 5;\n        this._targetLocalLat = focusLat + 5;\n\n        var maxAngleDistance:number = Math.max(maxLat-minLat, maxLong-minLong);\n        maxAngleDistance-=20;\n        if(maxAngleDistance<0) {\n            maxAngleDistance = 0;\n        }\n\n        this._targetCamDistance = 40+Math.sqrt(maxAngleDistance);\n\n        this._lookAtTarget.x = avgX;\n        this._lookAtTarget.y = avgY;\n        this._lookAtTarget.z = avgZ;\n    }\n\n    /**\n     * Initialise the listeners\n     */\n    private initListeners():void\n    {\n        window.onresize  = (event) => this.onResize(event);\n\n        this._canvasContainer.onmousedown = (event) => this.onMouseDown(event);\n        this._canvasContainer.onmouseup = (event) => this.onMouseUp(event);\n        this._canvasContainer.onmousemove = (event) => this.onMouseMove(event);\n\n        var self = this;\n\n        // some messy stuff because there's actually no ontouchstart etc properties?\n        this._canvasContainer.addEventListener( 'touchstart', onTouchStart, false );\n        this._canvasContainer.addEventListener( 'touchend', onTouchEnd, false );\n        this._canvasContainer.addEventListener( 'touchmove', onTouchMove, false );\n\n\n        function onTouchStart(event):void\n        {\n            self._mouseMoved = false;\n            if (this.isInLocalView) return;\n\n            event.preventDefault();\n            event.stopPropagation();\n\n            self._move = false;\n            self._zoom = false;\n\n            switch ( event.touches.length ) {\n                case 1:\n                    self._move = true;\n                    self._lastLongitude = self._cameraController.longitude;\n                    self._lastLatitude = self._cameraController.latitude;\n                    self._lastMouseX = event.touches[0].pageX;\n                    self._lastMouseY = event.touches[0].pageY;\n                    break;\n                case 2:\n                    self._zoom = true;\n                    var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n                    var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n                    self._zoomInitFingerDistance = Math.sqrt( dx * dx + dy * dy );\n                    self._refZoomDistance = self._cameraController.distance;\n                    break;\n            }\n        }\n\n        function onTouchEnd(event):void\n        {\n            event.preventDefault();\n            event.stopPropagation();\n\n            if(self._move) {\n                if(self._mouseMoved) {\n                    self._mouseMoved = false;\n                }else{\n                    console.log(\"3\");\n                    self.focusCameraOnCountry(event.touches[0].pageX, event.touches[0].pageY);\n                }\n            }\n            self._move = false;\n            self._zoom = false;\n        }\n\n        function onTouchMove(event):void\n        {\n            event.preventDefault();\n            event.stopPropagation();\n            self._mouseMoved = true;\n            switch ( event.touches.length ) {\n                case 1:\n                    if (self._move) {\n                        self._cameraController.longitude = -0.3 * (event.touches[0].pageX - self._lastMouseX) + self._lastLongitude;\n                        self._cameraController.latitude = -0.3 * (event.touches[0].pageY - self._lastMouseY) + self._lastLatitude;\n                    }\n                    break;\n                case 2:\n                    if (self._zoom) {\n                        var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n                        var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n                        var distance = Math.sqrt( dx * dx + dy * dy );\n                        self._targetCamDistance = self._cameraController.distance = Math.min(Math.max(self._refZoomDistance / distance * self._zoomInitFingerDistance, self._minDistance), self._maxDistance);\n                    }\n                    break;\n            }\n        }\n\n        this.onResize();\n\n        this._timer = new RequestAnimationFrame(this.onEnterFrame, this);\n        this._timer.start();\n    }\n\n    /**\n     * Render loop\n     */\n    private onEnterFrame(dt:number):void\n    {\n        var controllerLookAt = this._cameraController.lookAtTarget;\n        if (!this.isInLocalView) {\n            //update camera controler\n            if (this._autoRotate)\n                this._cameraController.longitude += dt * this._rotationSpeed;\n\n            // reset to 0 tilt\n            //this._cameraController.latitude *= .75;\n            controllerLookAt.x *= .75;\n            controllerLookAt.y *= .75;\n            controllerLookAt.z *= .75;\n        }\n        else {\n            this._cameraController.latitude = this._cameraController.latitude * this._viewTypeInertia + this._targetLocalLat * (1.0 - this._viewTypeInertia);\n            this._cameraController.longitude = this._cameraController.longitude * this._viewTypeInertia + this._targetLocalLong * (1.0 - this._viewTypeInertia);\n\n            controllerLookAt.x = controllerLookAt.x * this._viewTypeInertia + this._lookAtTarget.x * (1.0 - this._viewTypeInertia);\n            controllerLookAt.y = controllerLookAt.y * this._viewTypeInertia + this._lookAtTarget.y * (1.0 - this._viewTypeInertia);\n            controllerLookAt.z = controllerLookAt.z * this._viewTypeInertia + this._lookAtTarget.z * (1.0 - this._viewTypeInertia);\n        }\n\n        //this._cameraController.latitude = 50;\n        //this._cameraController.longitude = 50;\n\n        this._cameraController.distance = this._cameraController.distance * this._viewTypeInertia + this._targetCamDistance * (1.0 - this._viewTypeInertia);\n\n        this._cameraController.update();\n\n        this._haloMesh.lookAt(this._view.camera.scenePosition);\n\n        if (this._autoCycleTime) {\n            this._dataVisMaterial.hour += dt * this._autoCycleTimeSpeed;\n\n            while (this._dataVisMaterial.hour > 24) {\n                this._dataVisMaterial.hour -= 24;\n            }\n        }\n\n        //update view\n        this._view.render();\n    }\n\n    /**\n     * Mouse down listener for navigation\n     */\n    private onMouseDown(event):void\n    {\n        this._mouseMoved = false;\n        if (this.isInLocalView) return;\n\n        //this._view.cameraunproject\n\n        this._lastLongitude = this._cameraController.longitude;\n        this._lastLatitude = this._cameraController.latitude;\n        this._lastMouseX = event.pageX;\n        this._lastMouseY = event.pageY;\n        this._move = true;\n    }\n\n    /**\n     * Mouse up listener for navigation\n     */\n    private onMouseUp(event):void\n    {\n        this._move = false;\n        if(this._mouseMoved) {\n            this._mouseMoved = false;\n        }else{\n            this.focusCameraOnCountry(event.pageX, event.pageY);\n        }\n    }\n\n    private onMouseMove(event)\n    {\n        this._mouseMoved = true;\n        if (this._move) {\n            this._cameraController.longitude = -0.3*(event.pageX - this._lastMouseX) + this._lastLongitude;\n            this._cameraController.latitude = -0.3*(event.pageY - this._lastMouseY) + this._lastLatitude;\n        }\n    }\n\n    /**\n     * Mouse wheel listener for navigation\n     */\n    /*private onMouseWheel(event):void\n     {\n     if (this.isInLocalView) return;\n\n     this._targetCamDistance -= event.wheelDelta * 5;\n\n     if (this._targetCamDistance < 100)\n     this._targetCamDistance = 100;\n     else if (this._cameraController.distance > 2000)\n     this._targetCamDistance = 2000;\n     }*/\n\n    /**\n     * window listener for resize events\n     */\n    private onResize(event = null):void\n    {\n        this._view.y         = 0;\n        this._view.x         = 0;\n        this._view.width     = window.innerWidth;\n        this._view.height    = window.innerHeight;\n    }\n\n}\nexport = Away3DDataVisView",
    "import MathConsts\t\t\t\t= require(\"awayjs-core/lib/geom/MathConsts\");\nimport Vector3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Vector3D\");\nimport Matrix3D\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\n\nimport DisplayObject\t\t\t= require(\"awayjs-display/lib/base/DisplayObject\");\nimport ControllerBase\t\t\t= require(\"awayjs-display/lib/controllers/ControllerBase\");\n\n/**\n * Basically the hover controller but to correspond correctly to the lat/long calculations\n *\n * @see    away.containers.View\n */\nclass RotationController extends ControllerBase\n{\n    public _iCurrentLong:number = 0;\n    public _iCurrentLat:number = 90;\n\n    private _longitude:number = 0;\n    private _latitude:number = 90;\n    private _distance:number = 1000;\n    private _steps:number = 8;\n    private _wrapLongitude:boolean = false;\n    private _lookAtTarget:Vector3D = new Vector3D(0, 0, 0, 1);\n\n    public get lookAtTarget():Vector3D\n    {\n        return this._lookAtTarget;\n    }\n\n    public get steps():number\n    {\n        return this._steps;\n    }\n\n    public set steps(val:number)\n    {\n        val = (val < 1)? 1 : val;\n\n        if (this._steps == val)\n            return;\n\n        this._steps = val;\n\n        this.pNotifyUpdate();\n    }\n\n    /**\n     * Rotation of the camera in degrees around the y axis. Defaults to 0.\n     */\n    public get longitude():number\n    {\n        return this._longitude;\n    }\n\n    public set longitude(val:number)\n    {\n        if (this._longitude == val)\n            return;\n\n        this._longitude = val;\n\n        this.pNotifyUpdate();\n    }\n\n    /**\n     * Elevation angle of the camera in degrees. Defaults to 90.\n     */\n    public get latitude():number\n    {\n        return this._latitude;\n    }\n\n    public set latitude(val:number)\n    {\n        if (val < -90) val = -90;\n        else if (val > 90) val = 90;\n        if (this._latitude == val)\n            return;\n\n        this._latitude = val;\n\n        this.pNotifyUpdate();\n    }\n\n    /**\n     * Distance between the camera and the specified target. Defaults to 1000.\n     */\n    public get distance():number\n    {\n        return this._distance;\n    }\n\n    public set distance(val:number)\n    {\n        if (this._distance == val)\n            return;\n\n        this._distance = val;\n\n        this.pNotifyUpdate();\n    }\n\n    /**\n     * Defines whether the value of the pan angle wraps when over 360 degrees or under 0 degrees. Defaults to false.\n     */\n    public get wrapLongitude():boolean\n    {\n        return this._wrapLongitude;\n    }\n\n    public set wrapLongitude(val:boolean)\n    {\n        if (this._wrapLongitude == val)\n            return;\n\n        this._wrapLongitude = val;\n\n        this.pNotifyUpdate();\n    }\n\n    /**\n     * Creates a new <code>HoverController</code> object.\n     */\n    constructor(targetObject:DisplayObject = null)\n    {\n        super(targetObject);\n\n        //values passed in contrustor are applied immediately\n        this._iCurrentLong = this._longitude;\n        this._iCurrentLat = this._latitude;\n    }\n\n    public update(interpolate:boolean = true)\n    {\n        if (this._latitude != this._iCurrentLat || this._longitude != this._iCurrentLong) {\n\n            this.pNotifyUpdate();\n\n            if (this._wrapLongitude) {\n                if (this._longitude < 0) {\n                    this._iCurrentLong += this._longitude%360 + 360 - this._longitude;\n                    this._longitude = this._longitude%360 + 360;\n                } else {\n                    this._iCurrentLong += this._longitude%360 - this._longitude;\n                    this._longitude = this._longitude%360;\n                }\n\n                while (this._longitude - this._iCurrentLong < -180)\n                    this._iCurrentLong -= 360;\n\n                while (this._longitude - this._iCurrentLong > 180)\n                    this._iCurrentLong += 360;\n            }\n\n            if (interpolate) {\n                this._iCurrentLat += (this._latitude - this._iCurrentLat)/(this.steps + 1);\n                this._iCurrentLong += (this._longitude - this._iCurrentLong)/(this.steps + 1);\n            } else {\n                this._iCurrentLong = this._longitude;\n                this._iCurrentLat = this._latitude;\n            }\n\n            //snap coords if angle differences are close\n            if ((Math.abs(this._latitude - this._iCurrentLat) < 0.01) && (Math.abs(this._longitude - this._iCurrentLong) < 0.01)) {\n                this._iCurrentLat = this._latitude;\n                this._iCurrentLong = this._longitude;\n            }\n        }\n\n        var radX : number = this._iCurrentLat * Math.PI / 180.0;\n        var radY : number = this._iCurrentLong * Math.PI / 180.0;\n        var sinX : number = Math.sin(radX);\n        var cosX : number = Math.cos(radX);\n        var sinY : number = Math.sin(radY);\n        var cosY : number = Math.cos(radY);\n\n        var zAxisX = -sinY * cosX;\n        var zAxisY = -sinX;\n        var zAxisZ = cosY * cosX;\n\n        this._pTargetObject.transform.position = new Vector3D(zAxisX * this._distance, zAxisY * this._distance, zAxisZ * this._distance);\n        this._pTargetObject.lookAt(this._lookAtTarget);\n    }\n}\n\nexport = RotationController;",
    "import BaseDataShape = require(\"./BaseDataShape\");\n\nclass ConeDataShape implements BaseDataShape\n{\n    vertices:number[];\n\n    indices:number[];\n\n    constructor(radius?: number, height?:number, numSegments?:number)\n    {\n        radius = radius || .5;\n        height = height || 1;\n        numSegments = numSegments || 5;\n        this.vertices = [0.0, 0.0, height];\n        this.indices = [];\n        var baseIndex = 1;\n        var segmentRad = Math.PI * 2.0 / numSegments;\n\n        for (var i = 0; i < numSegments; ++i) {\n            var angle = segmentRad * i;\n            this.vertices.push(Math.cos(angle) * radius, Math.sin(angle) * radius, 0.0);\n            if (i == numSegments - 1)\n                this.indices.push(0, baseIndex, 1);\n            else\n                this.indices.push(0, baseIndex, baseIndex+1);\n\n            ++baseIndex;\n        }\n    }\n}\nexport = ConeDataShape;",
    "import BaseDataShape = require(\"./BaseDataShape\");\nimport DataVisSubRenderable = require(\"./DataVisSubRenderable\");\nimport PyramidDataShape = require(\"./PyramidDataShape\");\n\nimport WorldDataElement\t= require(\"./../../data/WorldDataElement\");\nimport WorldDataSet\t= require(\"./../../data/WorldDataSet\");\n\nclass DataVisRenderable\n{\n    private _subRenderables : DataVisSubRenderable[];\n\n    constructor(dataPoints:WorldDataSet, baseShape?:BaseDataShape)\n    {\n        this.init(dataPoints, baseShape || new PyramidDataShape());\n    }\n\n    get numSubRenderables() { return this._subRenderables.length; }\n    getSubRenderable(index:number) { return this._subRenderables[index]; }\n\n    private init(dataPoints:WorldDataSet, baseShape:BaseDataShape):void\n    {\n        // need to split data points, so there's not more than 2^16 vertices\n        var baseVertices = baseShape.vertices.length;\n        var maxPoints = Math.floor(65535 / baseVertices);\n        var numDataPoints = dataPoints.elements.length;\n\n        this._subRenderables = [];\n\n        if (numDataPoints < maxPoints) {\n            this.addSubRenderable(dataPoints, 0, numDataPoints, baseShape);\n        }\n        else {\n            for (var i = 0; i < numDataPoints; i += maxPoints) {\n                this.addSubRenderable(dataPoints, i, i + maxPoints, baseShape);\n            }\n        }\n    }\n\n    private addSubRenderable(dataPoints:WorldDataSet, start:number, end:number, baseShape:BaseDataShape)\n    {\n        this._subRenderables.push(new DataVisSubRenderable(dataPoints, start, end, baseShape));\n    }\n\n    public dispose():void\n    {\n        var len = this._subRenderables.length;\n        for (var i = 0; i < len; ++i) {\n            this._subRenderables[i].dispose();\n        }\n    }\n}\n\nexport = DataVisRenderable;",
    "import TriangleSubGeometry = require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport SubGeometryEvent\t= require(\"awayjs-display/lib/events/SubGeometryEvent\");\nimport BaseDataShape = require(\"./BaseDataShape\");\nimport CubeDataShape = require(\"./CubeDataShape\");\nimport PyramidDataShape = require(\"./PyramidDataShape\");\n\n\nimport WorldDataElement\t= require(\"./../../data/WorldDataElement\");\nimport WorldDataSet\t= require(\"./../../data/WorldDataSet\");\n\nclass DataVisSubRenderable\n{\n    private _vertexPositionData : Float32Array;\n    private _vertexHourlyData : Float32Array;\n    private _indexData : Uint8Array;\n    private _vertexPositionBuffer : WebGLBuffer;\n    private _vertexHourlyBuffer : WebGLBuffer;\n    private _indexBuffer : WebGLBuffer;\n    private _numTriangles : number;\n    private _gl : WebGLRenderingContext;\n    private _minLat : number;\n    private _maxLat : number;\n    private _minLong : number;\n    private _maxLong : number;\n\n    constructor(dataPoints:WorldDataSet, startPoint:number, endPoint:number, baseShape?:BaseDataShape)\n    {\n        this.init(dataPoints, baseShape || new PyramidDataShape(), startPoint, endPoint);\n    }\n\n    public get minLat() : number { return this._minLat; }\n    public get maxLat() : number { return this._maxLat; }\n    public get minLong() : number { return this._minLong; }\n    public get maxLong() : number { return this._maxLong; }\n\n    public get numTriangles() : number\n    {\n        return this._numTriangles;\n    }\n\n    public dispose() : void\n    {\n        if (this._indexBuffer) this._gl.deleteBuffer(this._indexBuffer);\n        if (this._vertexPositionBuffer) this._gl.deleteBuffer(this._vertexPositionBuffer);\n        if (this._vertexHourlyBuffer) this._gl.deleteBuffer(this._vertexHourlyBuffer);\n\n        this._indexBuffer = null;\n        this._vertexPositionBuffer = null;\n        this._vertexHourlyBuffer = null;\n    }\n\n    public getVertexPositionBuffer(gl:WebGLRenderingContext) : WebGLBuffer\n    {\n        this._gl = gl;\n        if (!this._vertexPositionBuffer) {\n            this._vertexPositionBuffer = gl.createBuffer();\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexPositionBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, this._vertexPositionData, gl.STATIC_DRAW);\n            this._vertexPositionData = null;\n        }\n        return this._vertexPositionBuffer;\n    }\n\n    public getVertexHourlyBuffer(gl:WebGLRenderingContext) : WebGLBuffer\n    {\n        this._gl = gl;\n        if (!this._vertexHourlyBuffer) {\n            this._vertexHourlyBuffer = gl.createBuffer();\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexHourlyBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, this._vertexHourlyData, gl.STATIC_DRAW);\n            this._vertexHourlyData = null;\n        }\n        return this._vertexHourlyBuffer;\n    }\n\n    public getIndexBuffer(gl:WebGLRenderingContext) : WebGLBuffer\n    {\n        if (!this._indexBuffer) {\n            this._indexBuffer = gl.createBuffer();\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer);\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this._indexData, gl.STATIC_DRAW);\n            this._indexData = null;\n        }\n\n        return this._indexBuffer;\n    }\n\n    // this is most likely going to be an array of structs\n    private init(dataSet:WorldDataSet, baseShape:BaseDataShape, startPoint:number, endPoint:number):void\n    {\n        var dataPoints = dataSet.elements;\n        var numPoints = dataPoints.length;\n\n        if (numPoints == 0) {\n            this._numTriangles = 0;\n            return;\n        }\n        if (numPoints < endPoint) endPoint = numPoints;\n\n        var baseIndices = baseShape.indices;\n        var baseVertices = baseShape.vertices;\n        var numBaseIndices = baseIndices.length;\n        var numBaseVertices = baseVertices.length;\n\n        numPoints = endPoint - startPoint;\n\n        var vertexPositionData = this._vertexPositionData = new Float32Array(numPoints * numBaseVertices * 5);\n        var vertexHourlyData = this._vertexHourlyData = new Float32Array(numPoints * numBaseVertices * 24);\n        var indexData = this._indexData = new Uint16Array(numPoints * numBaseIndices);\n\n        var vertexPosCounter : number = 0;\n        var vertexHourCounter : number = 0;\n        var indexCounter : number = 0;\n        var indexOffset : number = 0;\n\n        this._maxLat = this._minLat = dataPoints[0].latitude;\n        this._maxLong = this._minLong = dataPoints[0].longitude;\n\n        for(var i : number = startPoint; i < endPoint; ++i) {\n            var dataPoint : WorldDataElement = dataPoints[i];\n            var values : number[] = dataPoint.hourlyValues;\n            var lat : number = dataPoint.latitude;\n            var long : number = dataPoint.longitude;\n            var j = 0;\n\n            // find bounds:\n            if (lat < this._minLat) this._minLat = lat;\n            if (lat > this._maxLat) this._maxLat = lat;\n            if (long < this._minLong) this._minLong = long;\n            if (long > this._maxLong) this._maxLong = long;\n\n            lat *= Math.PI / 180.0;\n            long *= Math.PI / 180.0;\n\n            while (j < numBaseVertices) {\n                vertexPositionData[vertexPosCounter++] = baseVertices[j++];\n                vertexPositionData[vertexPosCounter++] = baseVertices[j++];\n                vertexPositionData[vertexPosCounter++] = baseVertices[j++];\n                vertexPositionData[vertexPosCounter++] = lat;\n                vertexPositionData[vertexPosCounter++] = long;\n\n                for (var h = 0; h < 24; ++h) {\n                    vertexHourlyData[vertexHourCounter++] = values[h];\n                }\n            }\n\n            for (j = 0; j < numBaseIndices; ++j) {\n                indexData[indexCounter++] = indexOffset + baseIndices[j];\n            }\n\n            indexOffset += numBaseVertices / 3;\n        }\n\n        this._numTriangles = indexData.length / 3;\n    }\n}\nexport = DataVisSubRenderable;",
    "import BaseDataShape = require(\"./BaseDataShape\");\n\nclass PyramidDataShape implements BaseDataShape\n{\n    vertices:number[] = [\n        -.5, -.5, 0.0, .5, -.5, 0.0, .5, .5, 0.0, -.5, .5, 0.0,\n        0, 0, 1.0\n    ];\n\n    indices:number[] = [\n        0, 1, 4, 1, 2, 4, 2, 3, 4, 3, 0, 4\n    ];\n\n    constructor()\n    {\n\n    }\n}\nexport = PyramidDataShape;",
    "import BitmapData\t\t\t\t\t= require(\"awayjs-core/lib/base/BitmapData\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Rectangle\t\t\t\t\t= require(\"awayjs-core/lib/geom/Rectangle\");\nimport ByteArray\t\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport ContextGLBlendFactor\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLBlendFactor\");\nimport ContextGLClearMask\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLClearMask\");\nimport ContextGLCompareMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLCompareMode\");\nimport ContextGLMipFilter\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLMipFilter\");\nimport ContextGLProgramType\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLProgramType\");\nimport ContextGLTextureFilter\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTextureFilter\");\nimport ContextGLTriangleFace\t\t= require(\"awayjs-stagegl/lib/base/ContextGLTriangleFace\");\nimport ContextGLVertexBufferFormat\t= require(\"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat\");\nimport ContextGLWrapMode\t\t\t= require(\"awayjs-stagegl/lib/base/ContextGLWrapMode\");\nimport CubeTextureWebGL\t\t\t\t= require(\"awayjs-stagegl/lib/base/CubeTextureWebGL\");\nimport IContextGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IContextGL\");\nimport IndexBufferWebGL\t\t\t\t= require(\"awayjs-stagegl/lib/base/IndexBufferWebGL\");\nimport TextureBaseWebGL\t\t\t\t= require(\"awayjs-stagegl/lib/base/TextureBaseWebGL\");\nimport TextureWebGL\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/TextureWebGL\");\nimport SamplerState\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/SamplerState\");\nimport VertexBufferWebGL\t\t\t= require(\"awayjs-stagegl/lib/base/VertexBufferWebGL\");\nimport ProgramGLSL\t\t\t\t\t= require(\"./ProgramGLSL\");\n\nclass ContextGLSL implements IContextGL\n{\n    private _blendFactorDictionary:Object = new Object();\n    private _depthTestDictionary:Object = new Object();\n    private _textureIndexDictionary:Array<number> = new Array<number>(8);\n    private _textureTypeDictionary:Object = new Object();\n    private _wrapDictionary:Object = new Object();\n    private _filterDictionary:Object = new Object();\n    private _mipmapFilterDictionary:Object = new Object();\n    private _uniformLocationNameDictionary:Object = new Object();\n    private _vertexBufferDimensionDictionary:Object = new Object();\n\n    private _container:HTMLElement;\n    private _width:number;\n    private _height:number;\n    private _drawing:boolean;\n    private _blendEnabled:boolean;\n    private _blendSourceFactor:number;\n    private _blendDestinationFactor:number;\n\n    private _indexBufferList:Array<IndexBufferWebGL> = new Array<IndexBufferWebGL>();\n    private _vertexBufferList:Array<VertexBufferWebGL> = new Array<VertexBufferWebGL>();\n    private _textureList:Array<TextureBaseWebGL> = new Array<TextureBaseWebGL>();\n    private _programList:Array<ProgramGLSL> = new Array<ProgramGLSL>();\n\n    private _samplerStates:Array<SamplerState> = new Array<SamplerState>(8);\n\n    public static MAX_SAMPLERS:number = 8;\n\n    //@protected\n    public _gl:WebGLRenderingContext;\n\n    //@protected\n    public _currentProgram:ProgramGLSL;\n    private _activeTexture:number;\n\n\n    public get container():HTMLElement\n    {\n        return this._container;\n    }\n\n    constructor(canvas:HTMLCanvasElement)\n    {\n        this._container = canvas;\n\n        try {\n            this._gl = <WebGLRenderingContext> canvas.getContext(\"experimental-webgl\", { premultipliedAlpha:false, alpha:false });\n\n            if (!this._gl)\n                this._gl = <WebGLRenderingContext> canvas.getContext(\"webgl\", { premultipliedAlpha:false, alpha:false });\n        } catch (e) {\n            //this.dispatchEvent( new away.events.AwayEvent( away.events.AwayEvent.INITIALIZE_FAILED, e ) );\n        }\n\n        if (this._gl) {\n            //this.dispatchEvent( new away.events.AwayEvent( away.events.AwayEvent.INITIALIZE_SUCCESS ) );\n            //setup shortcut dictionaries\n            this._blendFactorDictionary[ContextGLBlendFactor.ONE] = this._gl.ONE;\n            this._blendFactorDictionary[ContextGLBlendFactor.DESTINATION_ALPHA] = this._gl.DST_ALPHA;\n            this._blendFactorDictionary[ContextGLBlendFactor.DESTINATION_COLOR] = this._gl.DST_COLOR;\n            this._blendFactorDictionary[ContextGLBlendFactor.ONE] = this._gl.ONE;\n            this._blendFactorDictionary[ContextGLBlendFactor.ONE_MINUS_DESTINATION_ALPHA] = this._gl.ONE_MINUS_DST_ALPHA;\n            this._blendFactorDictionary[ContextGLBlendFactor.ONE_MINUS_DESTINATION_COLOR] = this._gl.ONE_MINUS_DST_COLOR;\n            this._blendFactorDictionary[ContextGLBlendFactor.ONE_MINUS_SOURCE_ALPHA] = this._gl.ONE_MINUS_SRC_ALPHA;\n            this._blendFactorDictionary[ContextGLBlendFactor.ONE_MINUS_SOURCE_COLOR] = this._gl.ONE_MINUS_SRC_COLOR;\n            this._blendFactorDictionary[ContextGLBlendFactor.SOURCE_ALPHA] = this._gl.SRC_ALPHA;\n            this._blendFactorDictionary[ContextGLBlendFactor.SOURCE_COLOR] = this._gl.SRC_COLOR;\n            this._blendFactorDictionary[ContextGLBlendFactor.ZERO] = this._gl.ZERO;\n\n            this._depthTestDictionary[ContextGLCompareMode.ALWAYS] = this._gl.ALWAYS;\n            this._depthTestDictionary[ContextGLCompareMode.EQUAL] = this._gl.EQUAL;\n            this._depthTestDictionary[ContextGLCompareMode.GREATER] = this._gl.GREATER;\n            this._depthTestDictionary[ContextGLCompareMode.GREATER_EQUAL] = this._gl.GEQUAL;\n            this._depthTestDictionary[ContextGLCompareMode.LESS] = this._gl.LESS;\n            this._depthTestDictionary[ContextGLCompareMode.LESS_EQUAL] = this._gl.LEQUAL;\n            this._depthTestDictionary[ContextGLCompareMode.NEVER] = this._gl.NEVER;\n            this._depthTestDictionary[ContextGLCompareMode.NOT_EQUAL] = this._gl.NOTEQUAL;\n\n            this._textureIndexDictionary[0] = this._gl.TEXTURE0;\n            this._textureIndexDictionary[1] = this._gl.TEXTURE1;\n            this._textureIndexDictionary[2] = this._gl.TEXTURE2;\n            this._textureIndexDictionary[3] = this._gl.TEXTURE3;\n            this._textureIndexDictionary[4] = this._gl.TEXTURE4;\n            this._textureIndexDictionary[5] = this._gl.TEXTURE5;\n            this._textureIndexDictionary[6] = this._gl.TEXTURE6;\n            this._textureIndexDictionary[7] = this._gl.TEXTURE7;\n\n            this._textureTypeDictionary[\"texture2d\"] = this._gl.TEXTURE_2D;\n            this._textureTypeDictionary[\"textureCube\"] = this._gl.TEXTURE_CUBE_MAP;\n\n            this._wrapDictionary[ContextGLWrapMode.REPEAT] = this._gl.REPEAT;\n            this._wrapDictionary[ContextGLWrapMode.CLAMP] = this._gl.CLAMP_TO_EDGE;\n\n            this._filterDictionary[ContextGLTextureFilter.LINEAR] = this._gl.LINEAR;\n            this._filterDictionary[ContextGLTextureFilter.NEAREST] = this._gl.NEAREST;\n\n            this._mipmapFilterDictionary[ContextGLTextureFilter.LINEAR] = new Object();\n            this._mipmapFilterDictionary[ContextGLTextureFilter.LINEAR][ContextGLMipFilter.MIPNEAREST] = this._gl.LINEAR_MIPMAP_NEAREST;\n            this._mipmapFilterDictionary[ContextGLTextureFilter.LINEAR][ContextGLMipFilter.MIPLINEAR] = this._gl.LINEAR_MIPMAP_LINEAR;\n            this._mipmapFilterDictionary[ContextGLTextureFilter.LINEAR][ContextGLMipFilter.MIPNONE] = this._gl.LINEAR;\n            this._mipmapFilterDictionary[ContextGLTextureFilter.NEAREST] = new Object();\n            this._mipmapFilterDictionary[ContextGLTextureFilter.NEAREST][ContextGLMipFilter.MIPNEAREST] = this._gl.NEAREST_MIPMAP_NEAREST;\n            this._mipmapFilterDictionary[ContextGLTextureFilter.NEAREST][ContextGLMipFilter.MIPLINEAR] = this._gl.NEAREST_MIPMAP_LINEAR;\n            this._mipmapFilterDictionary[ContextGLTextureFilter.NEAREST][ContextGLMipFilter.MIPNONE] = this._gl.NEAREST;\n\n            this._uniformLocationNameDictionary[ContextGLProgramType.VERTEX] = \"vc\";\n            this._uniformLocationNameDictionary[ContextGLProgramType.FRAGMENT] = \"fc\";\n\n            this._vertexBufferDimensionDictionary[ContextGLVertexBufferFormat.FLOAT_1] = 1;\n            this._vertexBufferDimensionDictionary[ContextGLVertexBufferFormat.FLOAT_2] = 2;\n            this._vertexBufferDimensionDictionary[ContextGLVertexBufferFormat.FLOAT_3] = 3;\n            this._vertexBufferDimensionDictionary[ContextGLVertexBufferFormat.FLOAT_4] = 4;\n            this._vertexBufferDimensionDictionary[ContextGLVertexBufferFormat.BYTES_4] = 4;\n        } else {\n            //this.dispatchEvent( new away.events.AwayEvent( away.events.AwayEvent.INITIALIZE_FAILED, e ) );\n            alert(\"WebGL is not available.\");\n        }\n\n        //defaults\n        for (var i:number = 0; i < ContextGLSL.MAX_SAMPLERS; ++i) {\n            this._samplerStates[i] = new SamplerState();\n            this._samplerStates[i].wrap = this._gl.REPEAT;\n            this._samplerStates[i].filter = this._gl.LINEAR;\n            this._samplerStates[i].mipfilter = this._gl.LINEAR;\n        }\n    }\n\n    public gl():WebGLRenderingContext\n    {\n        return this._gl;\n    }\n\n    public clear(red:number = 0, green:number = 0, blue:number = 0, alpha:number = 1, depth:number = 1, stencil:number = 0, mask:number = ContextGLClearMask.ALL)\n    {\n        if (!this._drawing) {\n            this.updateBlendStatus();\n            this._drawing = true;\n        }\n\n        var glmask:number = 0;\n        if (mask & ContextGLClearMask.COLOR) glmask |= this._gl.COLOR_BUFFER_BIT;\n        if (mask & ContextGLClearMask.STENCIL) glmask |= this._gl.STENCIL_BUFFER_BIT;\n        if (mask & ContextGLClearMask.DEPTH) glmask |= this._gl.DEPTH_BUFFER_BIT;\n\n        this._gl.clearColor(red, green, blue, alpha);\n        this._gl.clearDepth(depth);\n        this._gl.clearStencil(stencil);\n        this._gl.clear(glmask);\n    }\n\n    public configureBackBuffer(width:number, height:number, antiAlias:number, enableDepthAndStencil:boolean = true)\n    {\n        this._width = width;\n        this._height = height;\n\n        if (enableDepthAndStencil) {\n            this._gl.enable(this._gl.STENCIL_TEST);\n            this._gl.enable(this._gl.DEPTH_TEST);\n        }\n\n        this._gl.viewport['width'] = width;\n        this._gl.viewport['height'] = height;\n\n        this._gl.viewport(0, 0, width, height);\n    }\n\n    public createCubeTexture(size:number, format:string, optimizeForRenderToTexture:boolean, streamingLevels:number = 0):CubeTextureWebGL\n    {\n        var texture:CubeTextureWebGL = new CubeTextureWebGL(this._gl, size);\n        this._textureList.push(texture);\n        return texture;\n    }\n\n    public createIndexBuffer(numIndices:number):IndexBufferWebGL\n    {\n        var indexBuffer:IndexBufferWebGL = new IndexBufferWebGL(this._gl, numIndices);\n        this._indexBufferList.push(indexBuffer);\n        return indexBuffer;\n    }\n\n    public createProgram():ProgramGLSL\n    {\n        var program:ProgramGLSL = new ProgramGLSL(this._gl);\n        this._programList.push(program);\n        return program;\n    }\n\n    public createTexture(width:number, height:number, format:string, optimizeForRenderToTexture:boolean, streamingLevels:number = 0):TextureWebGL\n    {\n        //TODO streaming\n        var texture:TextureWebGL = new TextureWebGL(this._gl, width, height);\n        this._textureList.push(texture);\n        return texture;\n    }\n\n    public createVertexBuffer(numVertices:number, data32PerVertex:number):VertexBufferWebGL\n    {\n        var vertexBuffer:VertexBufferWebGL = new VertexBufferWebGL(this._gl, numVertices, data32PerVertex);\n        this._vertexBufferList.push(vertexBuffer);\n        return vertexBuffer;\n    }\n\n    public dispose()\n    {\n        var i:number;\n        for (i = 0; i < this._indexBufferList.length; ++i)\n            this._indexBufferList[i].dispose();\n\n        this._indexBufferList = null;\n\n        for (i = 0; i < this._vertexBufferList.length; ++i)\n            this._vertexBufferList[i].dispose();\n\n        this._vertexBufferList = null;\n\n        for (i = 0; i < this._textureList.length; ++i)\n            this._textureList[i].dispose();\n\n        this._textureList = null;\n\n        for (i = 0; i < this._programList.length; ++i)\n            this._programList[i].dispose();\n\n        for (i = 0; i < this._samplerStates.length; ++i)\n            this._samplerStates[i] = null;\n\n        this._programList = null;\n    }\n\n    public drawToBitmapData(destination:BitmapData)\n    {\n        var arrayBuffer:ArrayBuffer = new ArrayBuffer(destination.width*destination.height*4);\n\n        this._gl.readPixels(0, 0, destination.width, destination.height, this._gl.RGBA, this._gl.UNSIGNED_BYTE, new Uint8Array(arrayBuffer));\n\n        var byteArray:ByteArray = new ByteArray();\n        byteArray.setArrayBuffer(arrayBuffer);\n\n        destination.setPixels(new Rectangle(0, 0, destination.width, destination.height), byteArray);\n    }\n\n    public drawTriangles(indexBuffer:IndexBufferWebGL, firstIndex:number = 0, numTriangles:number = -1)\n    {\n        if (!this._drawing)\n            throw \"Need to clear before drawing if the buffer has not been cleared since the last present() call.\";\n\n        this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER, indexBuffer.glBuffer);\n        this._gl.drawElements(this._gl.TRIANGLES, (numTriangles == -1)? indexBuffer.numIndices : numTriangles*3, this._gl.UNSIGNED_SHORT, firstIndex);\n    }\n\n    public present()\n    {\n        this._drawing = false;\n    }\n\n    public setBlendFactors(sourceFactor:string, destinationFactor:string)\n    {\n        this._blendEnabled = true;\n\n        this._blendSourceFactor = this._blendFactorDictionary[sourceFactor];\n\n        this._blendDestinationFactor = this._blendFactorDictionary[destinationFactor];\n\n        this.updateBlendStatus();\n    }\n\n    public setColorMask(red:boolean, green:boolean, blue:boolean, alpha:boolean)\n    {\n        this._gl.colorMask(red, green, blue, alpha);\n    }\n\n    public setCulling(triangleFaceToCull:string, coordinateSystem:string = \"leftHanded\")\n    {\n        if (triangleFaceToCull == ContextGLTriangleFace.NONE) {\n            this._gl.disable(this._gl.CULL_FACE);\n        } else {\n            this._gl.enable(this._gl.CULL_FACE);\n            switch (triangleFaceToCull) {\n                case ContextGLTriangleFace.BACK:\n                    this._gl.cullFace((coordinateSystem == \"leftHanded\")? this._gl.FRONT : this._gl.BACK);\n                    break\n                case ContextGLTriangleFace.FRONT:\n                    this._gl.cullFace((coordinateSystem == \"leftHanded\")? this._gl.BACK : this._gl.FRONT);\n                    break;\n                case ContextGLTriangleFace.FRONT_AND_BACK:\n                    this._gl.cullFace(this._gl.FRONT_AND_BACK);\n                    break;\n                default:\n                    throw \"Unknown ContextGLTriangleFace type.\"; // TODO error\n            }\n        }\n    }\n\n    // TODO ContextGLCompareMode\n    public setDepthTest(depthMask:boolean, passCompareMode:string)\n    {\n        this._gl.depthFunc(this._depthTestDictionary[passCompareMode]);\n\n        this._gl.depthMask(depthMask);\n    }\n\n    public setProgram(program:ProgramGLSL)\n    {\n        //TODO decide on construction/reference resposibilities\n        this._currentProgram = program;\n        program.focusProgram();\n    }\n\n    public setProgramConstantsFromMatrix(programType:string, firstRegister:number, matrix:Matrix3D, transposedMatrix:boolean = false)\n    {\n        //this._gl.uniformMatrix4fv(this._gl.getUniformLocation(this._currentProgram.glProgram, this._uniformLocationNameDictionary[programType]), !transposedMatrix, new Float32Array(matrix.rawData));\n\n        //TODO remove special case for WebGL matrix calls?\n        var d:number[] = matrix.rawData;\n        if (transposedMatrix) {\n            this.setProgramConstantsFromArray(programType, firstRegister, [ d[0], d[4], d[8], d[12] ], 1);\n            this.setProgramConstantsFromArray(programType, firstRegister + 1, [ d[1], d[5], d[9], d[13] ], 1);\n            this.setProgramConstantsFromArray(programType, firstRegister + 2, [ d[2], d[6], d[10], d[14] ], 1);\n            this.setProgramConstantsFromArray(programType, firstRegister + 3, [ d[3], d[7], d[11], d[15] ], 1);\n        } else {\n            this.setProgramConstantsFromArray(programType, firstRegister, [ d[0], d[1], d[2], d[3] ], 1);\n            this.setProgramConstantsFromArray(programType, firstRegister + 1, [ d[4], d[5], d[6], d[7] ], 1);\n            this.setProgramConstantsFromArray(programType, firstRegister + 2, [ d[8], d[9], d[10], d[11] ], 1);\n            this.setProgramConstantsFromArray(programType, firstRegister + 3, [ d[12], d[13], d[14], d[15] ], 1);\n        }\n    }\n\n    public static modulo:number = 0;\n\n    public setProgramConstantsFromArray(programType:string, firstRegister:number, data:number[], numRegisters:number = -1)\n    {\n        var locationName:string = this._uniformLocationNameDictionary[programType];\n        var startIndex:number;\n        for (var i:number = 0; i < numRegisters; i++) {\n            startIndex = i*4;\n            this._gl.uniform4f(this._gl.getUniformLocation(this._currentProgram.glProgram, locationName + (firstRegister + i)), data[startIndex], data[startIndex + 1], data[startIndex + 2], data[startIndex + 3]);\n        }\n    }\n\n    public setScissorRectangle(rectangle:Rectangle)\n    {\n        if (!rectangle) {\n            this._gl.disable(this._gl.SCISSOR_TEST);\n            return;\n        }\n\n        this._gl.enable(this._gl.SCISSOR_TEST);\n        this._gl.scissor(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n    }\n\n    public setTextureAt(sampler:number, texture:TextureBaseWebGL)\n    {\n        var samplerState:SamplerState = this._samplerStates[sampler];\n\n        if (this._activeTexture != sampler && (texture || samplerState.type)) {\n            this._activeTexture = sampler;\n            this._gl.activeTexture(this._textureIndexDictionary[sampler]);\n        }\n\n        if (!texture) {\n            if (samplerState.type) {\n                this._gl.bindTexture(samplerState.type, null);\n                samplerState.type = null;\n            }\n\n            return;\n        }\n\n        var textureType:number = this._textureTypeDictionary[texture.textureType];\n        samplerState.type = textureType;\n\n        this._gl.bindTexture(textureType, texture.glTexture);\n\n        this._gl.uniform1i(this._gl.getUniformLocation(this._currentProgram.glProgram, \"fs\" + sampler), sampler);\n\n        this._gl.texParameteri(textureType, this._gl.TEXTURE_WRAP_S, samplerState.wrap);\n        this._gl.texParameteri(textureType, this._gl.TEXTURE_WRAP_T, samplerState.wrap);\n\n        this._gl.texParameteri(textureType, this._gl.TEXTURE_MAG_FILTER, samplerState.filter);\n        this._gl.texParameteri(textureType, this._gl.TEXTURE_MIN_FILTER, samplerState.mipfilter);\n    }\n\n    public setSamplerStateAt(sampler:number, wrap:string, filter:string, mipfilter:string):void\n    {\n        if (0 <= sampler && sampler < ContextGLSL.MAX_SAMPLERS) {\n            this._samplerStates[sampler].wrap = this._wrapDictionary[wrap];\n            this._samplerStates[sampler].filter = this._filterDictionary[filter];\n            this._samplerStates[sampler].mipfilter = this._mipmapFilterDictionary[filter][mipfilter];\n        } else {\n            throw \"Sampler is out of bounds.\";\n        }\n    }\n\n    public setVertexBufferAt(location:number, buffer:VertexBufferWebGL, bufferOffset:number = 0, format:string = null)\n    {\n        if (!buffer) {\n            if (location > -1)\n                this._gl.disableVertexAttribArray(location);\n\n            return;\n        }\n\n        this._gl.bindBuffer(this._gl.ARRAY_BUFFER, buffer.glBuffer);\n        this._gl.enableVertexAttribArray(location);\n        this._gl.vertexAttribPointer(location, this._vertexBufferDimensionDictionary[format], this._gl.FLOAT, false, buffer.data32PerVertex*4, bufferOffset*4);\n    }\n\n    public setRenderToTexture(target:TextureBaseWebGL, enableDepthAndStencil:boolean = false, antiAlias:number = 0, surfaceSelector:number = 0)\n    {\n        var texture:TextureWebGL = <TextureWebGL> target;\n        var frameBuffer:WebGLFramebuffer = texture.frameBuffer;\n        this._gl.bindFramebuffer(this._gl.FRAMEBUFFER, frameBuffer);\n\n        if (enableDepthAndStencil) {\n            this._gl.enable(this._gl.STENCIL_TEST);\n            this._gl.enable(this._gl.DEPTH_TEST);\n        }\n\n        this._gl.viewport(0, 0, texture.width, texture.height );\n    }\n\n    public setRenderToBackBuffer()\n    {\n        this._gl.bindFramebuffer(this._gl.FRAMEBUFFER, null);\n    }\n\n    private updateBlendStatus()\n    {\n        if (this._blendEnabled) {\n            this._gl.enable(this._gl.BLEND);\n            this._gl.blendEquation(this._gl.FUNC_ADD);\n            this._gl.blendFunc(this._blendSourceFactor, this._blendDestinationFactor);\n        } else {\n            this._gl.disable(this._gl.BLEND);\n        }\n    }\n}\n\nexport = ContextGLSL;",
    "import ShaderCompilerBase = require(\"awayjs-renderergl/lib/compilation/ShaderCompilerBase\");\n\nclass GLSLCompiler extends ShaderCompilerBase\n{\n    public compile()\n    {\n        this._pVertexCode = this._pMaterialPass._iGetVertexCode(this._pShaderObject, this._pRegisterCache, this._pSharedRegisters);\n        this._pFragmentCode = this._pMaterialPass._iGetFragmentCode(this._pShaderObject, this._pRegisterCache, this._pSharedRegisters);\n    }\n\n    public get postAnimationFragmentCode():string\n    {\n        return \"\";\n    }\n\n    /**\n     * The register name containing the final shaded colour.\n     */\n    public get shadedTarget():string\n    {\n        return \"\";\n    }\n}\nexport = GLSLCompiler;\n",
    "import ShaderObjectBase = require(\"awayjs-renderergl/lib/compilation/ShaderObjectBase\");\nimport ShaderRegisterCache = require(\"awayjs-renderergl/lib/compilation/ShaderRegisterCache\");\nimport ShaderRegisterData = require(\"awayjs-renderergl/lib/compilation/ShaderRegisterData\");\nimport MaterialPassGLBase = require(\"awayjs-renderergl/lib/passes/MaterialPassGLBase\");\nimport GLSLShaderObject = require(\"./GLSLShaderObject\");\n\nclass GLSLMaterialPass extends MaterialPassGLBase\n{\n    private _vertexCode : string;\n    private _fragmentCode : string;\n\n    constructor(vertexCode:string, fragmentCode:string)\n    {\n        super();\n        this._vertexCode = vertexCode;\n        this._fragmentCode = fragmentCode;\n    }\n\n    _iGetVertexCode(shaderObject: ShaderObjectBase, registerCache: ShaderRegisterCache, sharedRegisters: ShaderRegisterData): string\n    {\n        return this._vertexCode;\n    }\n\n    _iGetFragmentCode(shaderObject: ShaderObjectBase, registerCache: ShaderRegisterCache, sharedRegisters: ShaderRegisterData): string\n    {\n        return this._fragmentCode;\n    }\n\n    createShaderObject(profile: string): ShaderObjectBase\n    {\n        return new GLSLShaderObject(profile);\n    }\n}\n\nexport = GLSLMaterialPass;",
    "import DefaultRenderer = require(\"awayjs-renderergl/lib/DefaultRenderer\");\nimport AnimationSetBase = require(\"awayjs-renderergl/lib/animators/AnimationSetBase\");\nimport ShaderObjectBase = require(\"awayjs-renderergl/lib/compilation/ShaderObjectBase\");\nimport MaterialPassData = require(\"awayjs-renderergl/lib/pool/MaterialPassData\");\nimport Camera = require(\"awayjs-display/lib/entities/Camera\");\nimport ProgramData = require(\"awayjs-stagegl/lib/pool/ProgramData\");\nimport ByteArray = require(\"awayjs-core/lib/utils/ByteArray\");\nimport AGALMiniAssembler = require(\"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler\");\nimport ContextMode = require(\"awayjs-display/lib/display/ContextMode\");\nimport MaterialGLBase = require(\"awayjs-renderergl/lib/materials/MaterialGLBase\");\nimport MaterialData = require(\"awayjs-renderergl/lib/pool/MaterialData\");\n\nclass GLSLRenderer extends DefaultRenderer\n{\n    private __numUsedStreams:number = 0;\n    private __numUsedTextures:number = 0;\n\n    constructor()\n    {\n        super(false, \"baseline\", ContextMode.NATIVE);\n    }\n\n    public getMaterial(material:MaterialGLBase, profile:string):MaterialData\n    {\n        var materialData:MaterialData = this[\"_materialDataPool\"].getItem(material);\n\n        if (materialData.invalidAnimation) {\n            materialData.invalidAnimation = false;\n\n            var materialDataPasses:Array<MaterialPassData> = materialData.getMaterialPasses(profile);\n\n            var renderOrderId = 0;\n            var mult:number = 1;\n            var materialPassData:MaterialPassData;\n            var len:number = materialDataPasses.length;\n            for (var i:number = 0; i < len; i++) {\n                materialPassData = materialDataPasses[i];\n                renderOrderId += this.getProgram(materialPassData).id*mult;\n                mult *= 1000;\n            }\n\n            materialData.renderOrderId = renderOrderId;\n        }\n\n        return materialData;\n    }\n\n    public activateMaterialPass(materialPassData:MaterialPassData, camera:Camera)\n    {\n        var shaderObject:ShaderObjectBase = materialPassData.shaderObject;\n\n        //clear unused vertex streams\n        for (var i = shaderObject.numUsedStreams; i < this.__numUsedStreams; i++)\n            this._pContext.setVertexBufferAt(i, null);\n\n        //clear unused texture streams\n        for (var i = shaderObject.numUsedTextures; i < this.__numUsedTextures; i++)\n            this._pContext.setTextureAt(i, null);\n\n        //activate shader object\n        shaderObject.iActivate(this._pStage, camera);\n\n        //check program data is uploaded\n        var programData:ProgramData = this.getProgram(materialPassData);\n\n        if (!programData.program) {\n            programData.program = this._pContext.createProgram();\n            var vertexByteCode:ByteArray = this.stringToByteArray(materialPassData.vertexCode);\n            var fragmentByteCode:ByteArray = this.stringToByteArray(materialPassData.fragmentCode);\n\n            programData.program.upload(vertexByteCode, fragmentByteCode);\n        }\n\n        //set program data\n        this._pContext.setProgram(programData.program);\n    }\n\n    private stringToByteArray(value:string) : ByteArray\n    {\n        var len = value.length;\n        var ba : ByteArray = new ByteArray();\n        ba.writeUnsignedInt(len);\n        for (var i = 0; i < len; ++i) {\n            ba.writeByte(value.charCodeAt(i));\n        }\n\n        return ba;\n    }\n\n    public deactivateMaterialPass(materialPassData:MaterialPassData)\n    {\n        var shaderObject:ShaderObjectBase = materialPassData.shaderObject;\n\n        if (materialPassData.usesAnimation)\n            (<AnimationSetBase> materialPassData.material.animationSet).deactivate(shaderObject, this._pStage);\n\n        materialPassData.shaderObject.iDeactivate(this._pStage);\n\n        this.__numUsedStreams = shaderObject.numUsedStreams;\n        this.__numUsedTextures = shaderObject.numUsedTextures;\n    }\n}\nexport = GLSLRenderer;",
    "import ShaderObjectBase = require(\"awayjs-renderergl/lib/compilation/ShaderObjectBase\");\nimport ShaderCompilerBase = require(\"awayjs-renderergl/lib/compilation/ShaderCompilerBase\");\nimport MaterialGLBase = require(\"awayjs-renderergl/lib/materials/MaterialGLBase\");\nimport MaterialPassGLBase = require(\"awayjs-renderergl/lib/passes/MaterialPassGLBase\");\n\nimport GLSLCompiler = require(\"./GLSLCompiler\");\n\nclass GLSLShaderObject extends ShaderObjectBase\n{\n    createCompiler(material: MaterialGLBase, materialPass: MaterialPassGLBase): ShaderCompilerBase\n    {\n        return new GLSLCompiler(material, materialPass, this);\n    }\n}\nexport = GLSLShaderObject;\n",
    "import ByteArray\t\t\t\t\t= require(\"awayjs-core/lib/utils/ByteArray\");\n\nimport AGALTokenizer\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/AGALTokenizer\");\nimport AGLSLParser\t\t\t\t\t= require(\"awayjs-stagegl/lib/aglsl/AGLSLParser\");\nimport IProgram\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/IProgram\");\n\n\nclass ProgramGLSL implements IProgram\n{\n    private _gl:WebGLRenderingContext;\n    private _program:WebGLProgram;\n    private _vertexShader:WebGLShader;\n    private _fragmentShader:WebGLShader;\n\n    constructor(gl:WebGLRenderingContext)\n    {\n        this._gl = gl;\n        this._program = this._gl.createProgram();\n    }\n\n    public upload(vertexProgram:ByteArray, fragmentProgram:ByteArray)\n    {\n        vertexProgram.position = 0;\n        fragmentProgram.position = 0;\n        var vertexString:string = this.byteArrayToString(vertexProgram);\n        var fragmentString:string = this.byteArrayToString(fragmentProgram);\n\n        this._vertexShader = this._gl.createShader(this._gl.VERTEX_SHADER);\n        this._fragmentShader = this._gl.createShader(this._gl.FRAGMENT_SHADER);\n\n        this._gl.shaderSource(this._vertexShader, vertexString);\n        this._gl.compileShader(this._vertexShader);\n\n        if (!this._gl.getShaderParameter(this._vertexShader, this._gl.COMPILE_STATUS)) {\n            console.log(\"Error compiling vertex shader\");\n            throw new Error(this._gl.getShaderInfoLog(this._vertexShader));\n        }\n\n        this._gl.shaderSource(this._fragmentShader, fragmentString);\n        this._gl.compileShader(this._fragmentShader);\n\n        if (!this._gl.getShaderParameter(this._fragmentShader, this._gl.COMPILE_STATUS)) {\n            console.log(\"Error compiling fragment shader\");\n            throw new Error(this._gl.getShaderInfoLog(this._fragmentShader));\n        }\n\n        this._gl.attachShader(this._program, this._vertexShader);\n        this._gl.attachShader(this._program, this._fragmentShader);\n        this._gl.linkProgram(this._program);\n\n        if (!this._gl.getProgramParameter(this._program, this._gl.LINK_STATUS)) {\n            throw new Error(this._gl.getProgramInfoLog(this._program));\n        }\n    }\n\n    private byteArrayToString(ba:ByteArray) : string\n    {\n        ba.position = 0;\n        var len = ba.readUnsignedInt();\n        var str : string = \"\";\n\n        for (var i = 0; i < len; ++i)\n            str += String.fromCharCode(ba.readByte());\n\n        return str;\n    }\n\n    public dispose()\n    {\n        this._gl.deleteProgram(this._program);\n    }\n\n    public focusProgram()\n    {\n        this._gl.useProgram(this._program);\n    }\n\n    public get glProgram():WebGLProgram\n    {\n        return this._program;\n    }\n}\n\nexport = ProgramGLSL;",
    "import Stage = require(\"awayjs-stagegl/lib/base/Stage\");\nimport ContextMode = require (\"awayjs-display/lib/display/ContextMode\");\nimport ContextWebGL = require (\"awayjs-stagegl/lib/base/ContextWebGL\");\nimport IContextGL = require (\"awayjs-stagegl/lib/base/IContextGL\");\nimport Event = require (\"awayjs-core/lib/events/Event\");\nimport ContextStage3D = require (\"awayjs-stagegl/lib/base/ContextStage3D\");\nimport ContextGLSL = require (\"./ContextGLSL\");\n\n// MASSIVE HACK\nclass StageHack\n{\n    static INIT()\n    {\n        Stage.prototype.requestContext = function (forceSoftware:boolean = false, profile:string = \"baseline\", mode:string = \"auto\")\n        {\n            if (this._usesSoftwareRendering != null)\n                this._usesSoftwareRendering = forceSoftware;\n\n            this._profile = profile;\n\n            try {\n                if (mode == ContextMode.FLASH)\n                    new ContextStage3D(<HTMLCanvasElement> this._container, (context:IContextGL) => this._callback(context));\n                else if (mode == ContextMode.WEBGL)\n                    this._context = new ContextWebGL(<HTMLCanvasElement> this._container);\n                else if (mode == ContextMode.NATIVE) {\n                    this._context = new ContextGLSL(<HTMLCanvasElement> this._container);\n                }\n\n            } catch (e) {\n                try {\n                    if (mode == ContextMode.AUTO)\n                        new ContextStage3D(<HTMLCanvasElement> this._container, (context:IContextGL) => this._callback(context));\n                    else\n                        this.dispatchEvent(new Event(Event.ERROR));\n                } catch (e) {\n                    this.dispatchEvent(new Event(Event.ERROR));\n                }\n\n            }\n\n            if (this._context)\n                this._callback(this._context);\n        };\n    }\n}\nexport = StageHack;",
    "import Matrix\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Matrix3DUtils\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\nimport Texture2DBase\t\t\t    = require(\"awayjs-core/lib/textures/Texture2DBase\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport MaterialBase\t\t\t\t\t= require(\"awayjs-display/lib/materials/MaterialBase\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport MaterialPassData\t\t\t\t= require(\"awayjs-renderergl/lib/pool/MaterialPassData\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/pool/RenderableBase\");\nimport ShaderObjectBase\t\t\t\t= require(\"awayjs-renderergl/lib/compilation/ShaderObjectBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/compilation/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/compilation/ShaderRegisterData\");\nimport TriangleMethodPass\t\t\t= require(\"awayjs-methodmaterials/lib/passes/TriangleMethodPass\");\n\nimport DataVisPass                  = require(\"./DataVisPass\");\nimport GlobePass                    = require(\"./GlobePass\");\nimport DataVisRenderable            = require(\"./../geometry/DataVisRenderable\");\n\nclass DataVisMaterial extends MaterialBase\n{\n    private _globePass: GlobePass;\n    private _dataVisPass: DataVisPass;\n\n    constructor(useGradients : boolean = false)\n    {\n        super();\n\n        this._globePass = new GlobePass();\n        this._dataVisPass = new DataVisPass(useGradients);\n\n        this._pAddScreenPass(this._globePass);\n        this._pAddScreenPass(this._dataVisPass);\n    }\n\n    get dataVisRenderable() : DataVisRenderable\n    {\n        return this._dataVisPass.dataVisRenderable;\n    }\n\n    set dataVisRenderable(value : DataVisRenderable)\n    {\n        this._dataVisPass.dataVisRenderable = value;\n    }\n\n    public get hour() : number { return this._dataVisPass.hour; }\n    public set hour(value : number) { this._dataVisPass.hour = value; }\n\n    public get maxValue() : number { return this._dataVisPass.maxValue; }\n    public set maxValue(value : number) { this._dataVisPass.maxValue = value; }\n\n    public get texture():Texture2DBase\n    {\n        return this._globePass.globeTexture;\n    }\n\n    public set texture(value:Texture2DBase)\n    {\n        this._globePass.globeTexture = value;\n    }\n\n    public get minColor():number\n    {\n        return this._dataVisPass.minColor;\n    }\n\n    public set minColor(value:number)\n    {\n        this._dataVisPass.minColor = value;\n    }\n\n    public get maxColor():number\n    {\n        return this._dataVisPass.maxColor;\n    }\n\n    public set maxColor(value:number)\n    {\n        this._dataVisPass.maxColor = value;\n    }\n}\nexport = DataVisMaterial;",
    "import Matrix3D\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport MaterialPassData = require(\"awayjs-renderergl/lib/pool/MaterialPassData\");\nimport RendererBase\t\t= require(\"awayjs-renderergl/lib/base/RendererBase\");\nimport Camera\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport ContextWebGL     = require(\"awayjs-stagegl/lib/base/ContextWebGL\");\nimport ProgramWebGL     = require(\"awayjs-stagegl/lib/base/ProgramWebGL\");\nimport RenderableBase   = require(\"awayjs-renderergl/lib/pool/RenderableBase\");\nimport Stage\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\")\nimport SubGeometryBase = require(\"awayjs-display/lib/base/SubGeometryBase\");\nimport TriangleSubGeometry = require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport GLSLMaterialPass = require(\"./../glsl/GLSLMaterialPass\");\nimport DataVisRenderable = require(\"./../geometry/DataVisRenderable\");\nimport DataVisSubRenderable = require(\"./../geometry/DataVisSubRenderable\");\n\n\nclass DataVisPass extends GLSLMaterialPass\n{\n    static VERTEX_CODE:string = \"\\\n        precision mediump float;\\n\\\n        \\n\\\n        attribute vec2 latLongPosition;\\n\\\n        attribute vec3 offsetPosition;\\n\\\n        \\n\\\n        attribute float valueHour1;\\n\\\n        attribute float valueHour2;\\n\\\n        \\n\\\n        uniform mat4 wvpMatrix;\\n\\\n        uniform float sphereRadius;\\n\\\n        uniform float hourInterpolation;\\n\\\n        uniform vec3 minColor;\\n\\\n        uniform vec3 maxColor;\\n\\\n        uniform float rcpMaxValue;\\n\\\n        \\n\\\n        varying vec3 color;\\n\\\n        \\n\\\n        void main() {\\n\\\n            float latitude = latLongPosition.x;\\n\\\n            float longitude = latLongPosition.y;\\n\\\n            float cosX = cos(latitude);\\n\\\n            float sinX = sin(latitude);\\n\\\n            float cosY = cos(longitude);\\n\\\n            float sinY = sin(longitude);\\n\\\n            // todo: could encode this in normal/tangent buffer, calc zAxis dynamically\\n\\\n            vec3 yAxis = vec3(-sinY*sinX, cosX, sinX * cosY);\\n\\\n            vec3 zAxis = vec3(-sinY*cosX, -sinX, cosX * cosY);\\n\\\n            vec3 xAxis = cross(yAxis, zAxis);\\n\\\n            mat3 rotation;\\\n            rotation = mat3(xAxis, yAxis, zAxis);\\n\\\n            float value = mix(valueHour1, valueHour2, hourInterpolation);\\n\\\n            float ratio = value * rcpMaxValue;\\n\\\n            vec3 localPos = offsetPosition*ratio;\\n\\\n            localPos.y = localPos.y*0.2;\\n\\\n            localPos.x = localPos.x*0.2;\\n\\\n            \\n\\\n            color = mix(minColor, maxColor, clamp(ratio, 0.0, 1.0));\\n\\\n            color = color * mix(minColor, maxColor, clamp(localPos.z, 0.5, 1.0));\\n\\\n            localPos.z += sphereRadius;\\n\\\n            vec4 rotatedPos = vec4(rotation * localPos, 1.0);\\n\\\n            gl_Position = wvpMatrix * rotatedPos;\\n\\\n        }\\\n    \";\n\n    static FRAGMENT_CODE:string = \"\\\n        precision mediump float;\\n\\\n        \\n\\\n        varying vec3 color;\\n\\\n        \\n\\\n        void main() {\\n\\\n            gl_FragColor = vec4(color, 1.0);\\n\\\n        }\\\n    \";\n\n    private _wvpPosition : WebGLUniformLocation;\n    private _sphereRadiusPosition : WebGLUniformLocation;\n    private _minColorLocation : WebGLUniformLocation;\n    private _maxColorLocation : WebGLUniformLocation;\n    private _hourInterpolationPosition : WebGLUniformLocation;\n    private _latLongAttribute : number;\n    private _valueHour1Attribute : number;\n    private _valueHour2Attribute : number;\n    private _offsetPositionAttribute : number;\n    private _radiusDirty : boolean = true;\n    private _hourDirty : boolean = true;\n    private _colorsDirty : boolean = true;\n    private _maxValueDirty : boolean = true;\n    private _wvpMatrix : Matrix3D = new Matrix3D();\n    private _gl : WebGLRenderingContext;\n    private _sphereRadius : number = 10.0;\n    private _maxValue : number = 1.0;\n    private _dataVisRenderable: DataVisRenderable;\n    private _hour : number = 0;\n    private _minColor : number = 0x1A3056;\n    private _maxColor : number = 0x83b1ff;\n\n    constructor(useGradients : boolean = false)\n    {\n        super((useGradients? \"#define USE_GRADIENTS\\n\" : \"\") + DataVisPass.VERTEX_CODE, DataVisPass.FRAGMENT_CODE);\n    }\n\n    public get minColor():number\n    {\n        return this._minColor;\n    }\n\n    public set minColor(value:number)\n    {\n        this._minColor = value;\n        this._colorsDirty = true;\n    }\n\n    public get maxColor():number\n    {\n        return this._maxColor;\n    }\n\n    public set maxColor(value:number)\n    {\n        this._maxColor = value;\n    }\n\n    get dataVisRenderable() : DataVisRenderable\n    {\n        return this._dataVisRenderable;\n    }\n\n    set dataVisRenderable(value : DataVisRenderable)\n    {\n        this._dataVisRenderable = value;\n    }\n\n    public get sphereRadius() : number { return this._sphereRadius; }\n    public set sphereRadius(value : number)\n    {\n        this._sphereRadius = value;\n        this._radiusDirty = true;\n    }\n\n    public get maxValue() : number { return this._maxValue; }\n    public set maxValue(value : number)\n    {\n        this._maxValue = value;\n        this._maxValueDirty = true;\n    }\n\n    public get hour() : number { return this._hour; }\n    public set hour(value : number)\n    {\n        this._hour = value;\n        this._hourDirty = true;\n    }\n\n    public _iActivate(pass:MaterialPassData, renderer:RendererBase, camera:Camera)\n    {\n        if (!this._dataVisRenderable) return;\n\n        renderer.activateMaterialPass(pass, camera);\n\n        this._gl = (<ContextWebGL>renderer._pContext).gl();\n        var program : WebGLProgram = (<ProgramWebGL>pass.programData.program)[\"_program\"];\n\n        if (!this._wvpPosition) {\n            this._sphereRadiusPosition = this._gl.getUniformLocation(program, \"sphereRadius\");\n            this._hourInterpolationPosition = this._gl.getUniformLocation(program, \"hourInterpolation\");\n            this._wvpPosition = this._gl.getUniformLocation(program, \"wvpMatrix\");\n            this._latLongAttribute = this._gl.getAttribLocation(program, \"latLongPosition\");\n            this._offsetPositionAttribute = this._gl.getAttribLocation(program, \"offsetPosition\");\n            this._valueHour1Attribute = this._gl.getAttribLocation(program, \"valueHour1\");\n            this._valueHour2Attribute = this._gl.getAttribLocation(program, \"valueHour2\");\n            var program : WebGLProgram = (<ProgramWebGL>pass.programData.program)[\"_program\"];\n            this._minColorLocation = this._gl.getUniformLocation(program, \"minColor\");\n            this._maxColorLocation = this._gl.getUniformLocation(program, \"maxColor\");\n        }\n\n        if (this._maxValueDirty) {\n            console.log(\"Changing max value to \" + this._maxValue);\n            this._gl.uniform1f(this._gl.getUniformLocation(program, \"rcpMaxValue\"), this._maxValue == 0? 1.0 : 1.0 / this._maxValue);\n            this._maxValueDirty = false;\n        }\n\n        if (this._radiusDirty) {\n            this._gl.uniform1f(this._sphereRadiusPosition, this._sphereRadius);\n            this._radiusDirty = false;\n        }\n\n        if (this._hourDirty) {\n            this._gl.uniform1f(this._hourInterpolationPosition, this._hour - Math.floor(this._hour));\n            this._hourDirty = false;\n        }\n\n        if (this._colorsDirty) {\n            this._gl.uniform3f(this._minColorLocation, (this._minColor >> 16) / 0xff*0.7, ((this._minColor >> 8) & 0xff) / 0xff*0.7, (this._minColor & 0xff) / 0xff*0.7);\n            this._gl.uniform3f(this._maxColorLocation, (this._maxColor >> 16) / 0xff, ((this._maxColor >> 8) & 0xff) / 0xff, (this._maxColor & 0xff) / 0xff);\n        }\n\n        this._gl.enableVertexAttribArray(this._offsetPositionAttribute);\n        this._gl.enableVertexAttribArray(this._latLongAttribute);\n        this._gl.enableVertexAttribArray(this._valueHour1Attribute);\n        this._gl.enableVertexAttribArray(this._valueHour2Attribute);\n    }\n\n    public setRenderState(pass:MaterialPassData, renderable:RenderableBase, stage:Stage, camera:Camera, viewProjection:Matrix3D)\n    {\n        if (!this._dataVisRenderable) return;\n\n        this._wvpMatrix.copyFrom(renderable.renderSceneTransform);\n        this._wvpMatrix.append(viewProjection);\n        var f32 : Float32Array = new Float32Array(this._wvpMatrix.rawData);\n        this._gl.uniformMatrix4fv(this._wvpPosition, false, f32);\n\n        var len = this._dataVisRenderable.numSubRenderables;\n        for (var i = 0; i < len; ++i) {\n            var subRenderable : DataVisSubRenderable = this._dataVisRenderable.getSubRenderable(i);\n            var vertexPosBuffer : WebGLBuffer = subRenderable.getVertexPositionBuffer(this._gl);\n            var vertexHourlyBuffer : WebGLBuffer = subRenderable.getVertexHourlyBuffer(this._gl);\n            var indexBuffer : WebGLBuffer = subRenderable.getIndexBuffer(this._gl);\n\n            this._gl.bindBuffer(this._gl.ARRAY_BUFFER, vertexPosBuffer);\n            this._gl.vertexAttribPointer(this._offsetPositionAttribute, 3, this._gl.FLOAT, false, 20, 0);\n            this._gl.vertexAttribPointer(this._latLongAttribute, 2, this._gl.FLOAT, false, 20, 12);\n\n            var currentHour = Math.floor(this._hour);\n            var nextHour = currentHour + 1;\n            if (nextHour == 24) nextHour = 0;\n\n            this._gl.bindBuffer(this._gl.ARRAY_BUFFER, vertexHourlyBuffer);\n            this._gl.vertexAttribPointer(this._valueHour1Attribute, 1, this._gl.FLOAT, false, 96, currentHour * 4);\n            this._gl.vertexAttribPointer(this._valueHour2Attribute, 1, this._gl.FLOAT, false, 96, nextHour * 4);\n\n            this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n            this._gl.drawElements(this._gl.TRIANGLES, subRenderable.numTriangles * 3, this._gl.UNSIGNED_SHORT, 0);\n        }\n    }\n\n    public _iDeactivate(pass:MaterialPassData, renderer:RendererBase)\n    {\n        renderer.deactivateMaterialPass(pass);\n\n        this._gl.disableVertexAttribArray(this._offsetPositionAttribute);\n        this._gl.disableVertexAttribArray(this._latLongAttribute);\n        this._gl.disableVertexAttribArray(this._valueHour1Attribute);\n        this._gl.disableVertexAttribArray(this._valueHour2Attribute);\n    }\n}\n\nexport = DataVisPass;",
    "import Matrix3D\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport MaterialPassData = require(\"awayjs-renderergl/lib/pool/MaterialPassData\");\nimport RendererBase\t\t= require(\"awayjs-renderergl/lib/base/RendererBase\");\nimport Texture2DBase    = require(\"awayjs-core/lib/textures/Texture2DBase\");\nimport Camera\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport ContextWebGL     = require(\"awayjs-stagegl/lib/base/ContextWebGL\");\nimport ProgramWebGL     = require(\"awayjs-stagegl/lib/base/ProgramWebGL\");\nimport RenderableBase   = require(\"awayjs-renderergl/lib/pool/RenderableBase\");\nimport Stage\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\")\nimport SubGeometryBase = require(\"awayjs-display/lib/base/SubGeometryBase\");\nimport TriangleSubGeometry = require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport GLSLMaterialPass = require(\"./../glsl/GLSLMaterialPass\");\n\n\nclass GlobePass extends GLSLMaterialPass\n{\n    static VERTEX_CODE:string = \"\\\n        precision mediump float;\\n\\\n        \\n\\\n        attribute vec4 position;\\n\\\n        attribute vec2 uv;\\n\\\n        attribute vec3 normal;\\n\\\n        \\n\\\n        uniform mat4 wvpMatrix;\\n\\\n        uniform mat4 worldViewMatrix;\\n\\\n        \\n\\\n        varying vec2 uvVar;\\n\\\n        varying vec3 viewNormal;\\n\\\n        \\n\\\n        void main() {\\n\\\n            gl_Position = wvpMatrix * position;\\n\\\n            viewNormal = mat3(worldViewMatrix) * normal;\\n\\\n            uvVar = uv;\\n\\\n        }\\\n    \";\n\n    static FRAGMENT_CODE:string = \"\\\n        precision mediump float;\\n\\\n        \\n\\\n        varying vec2 uvVar;\\n\\\n        varying vec3 viewNormal;\\n\\\n        uniform sampler2D globeSampler;\\n\\\n        \\n\\\n        void main() {\\n\\\n            vec3 normal = normalize(viewNormal);\\n\\\n            float rimFactor = 1.0 - clamp(-normal.z, 0.0, 1.0);\\n\\\n            rimFactor = pow(rimFactor * 1.7, 4.0);\\n\\\n            vec4 rimColor = vec4(1.0, 1.0, 1.0, 1.0);\\n\\\n            vec4 globeColor = texture2D(globeSampler, uvVar);\\n\\\n            gl_FragColor = mix(globeColor, rimColor, rimFactor);\\n\\\n        }\\\n    \";\n\n    private _wvpPosition : WebGLUniformLocation;\n    private _worldViewMatrixPosition : WebGLUniformLocation;\n    private _positionAttribute : number;\n    private _uvAttribute : number;\n    private _normalAttribute : number;\n    private _matrix : Matrix3D = new Matrix3D();\n    private _gl : WebGLRenderingContext;\n    private _globeTexture : Texture2DBase;\n\n    constructor()\n    {\n        super(GlobePass.VERTEX_CODE, GlobePass.FRAGMENT_CODE);\n    }\n\n    public get globeTexture() : Texture2DBase\n    {\n        return this._globeTexture;\n    }\n\n    public set globeTexture(value : Texture2DBase)\n    {\n        this._globeTexture = value;\n    }\n\n    public _iActivate(pass:MaterialPassData, renderer:RendererBase, camera:Camera)\n    {\n        renderer.activateMaterialPass(pass, camera);\n\n        this._gl = (<ContextWebGL>renderer._pContext).gl();\n        var program : WebGLProgram = (<ProgramWebGL>pass.programData.program)[\"_program\"];\n\n        if (!this._wvpPosition) {\n            this._wvpPosition = this._gl.getUniformLocation(program, \"wvpMatrix\");\n            this._worldViewMatrixPosition = this._gl.getUniformLocation(program, \"worldViewMatrix\");\n            this._positionAttribute = this._gl.getAttribLocation(program, \"position\");\n            this._uvAttribute = this._gl.getAttribLocation(program, \"uv\");\n            this._normalAttribute = this._gl.getAttribLocation(program, \"normal\");\n            var textureIndex = this._gl.getUniformLocation(program, \"globeSampler\");\n            this._gl.uniform1i(textureIndex, 0);\n        }\n\n    }\n\n    public setRenderState(pass:MaterialPassData, renderable:RenderableBase, stage:Stage, camera:Camera, viewProjection:Matrix3D)\n    {\n        this._matrix.copyFrom(renderable.renderSceneTransform);\n        this._matrix.append(viewProjection);\n\n        var f32 : Float32Array = new Float32Array(this._matrix.rawData);\n        this._gl.uniformMatrix4fv(this._wvpPosition, false, f32);\n\n        this._matrix.copyFrom(renderable.renderSceneTransform);\n        this._matrix.append(camera.inverseSceneTransform);\n        f32 = new Float32Array(this._matrix.rawData);\n        this._gl.uniformMatrix4fv(this._worldViewMatrixPosition, false, f32);\n\n        stage.activateBuffer(this._positionAttribute, renderable.getVertexData(TriangleSubGeometry.POSITION_DATA), renderable.getVertexOffset(TriangleSubGeometry.POSITION_DATA), \"float3\");\n        stage.activateBuffer(this._uvAttribute, renderable.getVertexData(TriangleSubGeometry.UV_DATA), renderable.getVertexOffset(TriangleSubGeometry.UV_DATA), \"float2\");\n        stage.activateBuffer(this._normalAttribute, renderable.getVertexData(TriangleSubGeometry.NORMAL_DATA), renderable.getVertexOffset(TriangleSubGeometry.NORMAL_DATA), \"float3\");\n        stage.activateTexture(0, this._globeTexture);\n        stage.context.drawTriangles(stage.getIndexBuffer(renderable.getIndexData()), 0, renderable.numTriangles);\n    }\n\n    public _iDeactivate(pass:MaterialPassData, renderer:RendererBase)\n    {\n        renderer.deactivateMaterialPass(pass);\n    }\n}\n\nexport = GlobePass;",
    "import Matrix\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix\");\nimport Matrix3D\t\t\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport Matrix3DUtils\t\t\t\t= require(\"awayjs-core/lib/geom/Matrix3DUtils\");\nimport Texture2DBase\t\t\t    = require(\"awayjs-core/lib/textures/Texture2DBase\");\n\nimport Camera\t\t\t\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport MaterialBase\t\t\t\t\t= require(\"awayjs-display/lib/materials/MaterialBase\");\n\nimport Stage\t\t\t\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\");\n\nimport MaterialPassData\t\t\t\t= require(\"awayjs-renderergl/lib/pool/MaterialPassData\");\nimport RenderableBase\t\t\t\t= require(\"awayjs-renderergl/lib/pool/RenderableBase\");\nimport ShaderObjectBase\t\t\t\t= require(\"awayjs-renderergl/lib/compilation/ShaderObjectBase\");\nimport ShaderRegisterCache\t\t\t= require(\"awayjs-renderergl/lib/compilation/ShaderRegisterCache\");\nimport ShaderRegisterData\t\t\t= require(\"awayjs-renderergl/lib/compilation/ShaderRegisterData\");\n\nimport HaloPass                    = require(\"./HaloPass\");\n\nclass HaloMaterial extends MaterialBase\n{\n    private _haloPass: HaloPass;\n\n    constructor(texture:Texture2DBase)\n    {\n        super();\n\n        this._haloPass = new HaloPass();\n        this._pAddScreenPass(this._haloPass);\n        this._haloPass.texture = texture;\n    }\n\n    public get texture():Texture2DBase\n    {\n        return this._haloPass.texture;\n    }\n\n    public set texture(value:Texture2DBase)\n    {\n        this._haloPass.texture = value;\n    }\n}\nexport = HaloMaterial;",
    "import Matrix3D\t\t\t= require(\"awayjs-core/lib/geom/Matrix3D\");\nimport MaterialPassData = require(\"awayjs-renderergl/lib/pool/MaterialPassData\");\nimport RendererBase\t\t= require(\"awayjs-renderergl/lib/base/RendererBase\");\nimport Texture2DBase    = require(\"awayjs-core/lib/textures/Texture2DBase\");\nimport Camera\t\t\t= require(\"awayjs-display/lib/entities/Camera\");\nimport ContextWebGL     = require(\"awayjs-stagegl/lib/base/ContextWebGL\");\nimport ProgramWebGL     = require(\"awayjs-stagegl/lib/base/ProgramWebGL\");\nimport RenderableBase   = require(\"awayjs-renderergl/lib/pool/RenderableBase\");\nimport Stage\t\t\t= require(\"awayjs-stagegl/lib/base/Stage\")\nimport SubGeometryBase = require(\"awayjs-display/lib/base/SubGeometryBase\");\nimport TriangleSubGeometry = require(\"awayjs-display/lib/base/TriangleSubGeometry\");\nimport GLSLMaterialPass = require(\"./../glsl/GLSLMaterialPass\");\n\n\nclass GlobePass extends GLSLMaterialPass\n{\n    static VERTEX_CODE:string = \"\\\n        precision mediump float;\\n\\\n        \\n\\\n        attribute vec4 position;\\n\\\n        attribute vec2 uv;\\n\\\n        \\n\\\n        uniform mat4 wvpMatrix;\\n\\\n        \\n\\\n        varying vec2 uvVar;\\n\\\n        \\n\\\n        void main() {\\n\\\n            gl_Position = wvpMatrix * position;\\n\\\n            uvVar = uv;\\n\\\n        }\\\n    \";\n\n    static FRAGMENT_CODE:string = \"\\\n        precision mediump float;\\n\\\n        \\n\\\n        varying vec2 uvVar;\\n\\\n        uniform sampler2D textureSampler;\\n\\\n        \\n\\\n        void main() {\\n\\\n            gl_FragColor = texture2D(textureSampler, uvVar);\\n\\\n        }\\\n    \";\n\n    private _wvpPosition : WebGLUniformLocation;\n    private _positionAttribute : number;\n    private _uvAttribute : number;\n    private _matrix : Matrix3D = new Matrix3D();\n    private _gl : WebGLRenderingContext;\n    private _texture : Texture2DBase;\n\n    constructor()\n    {\n        super(GlobePass.VERTEX_CODE, GlobePass.FRAGMENT_CODE);\n    }\n\n    public get texture() : Texture2DBase\n    {\n        return this._texture;\n    }\n\n    public set texture(value : Texture2DBase)\n    {\n        this._texture = value;\n    }\n\n    public _iActivate(pass:MaterialPassData, renderer:RendererBase, camera:Camera)\n    {\n        renderer.activateMaterialPass(pass, camera);\n\n        this._gl = (<ContextWebGL>renderer._pContext).gl();\n        var program : WebGLProgram = (<ProgramWebGL>pass.programData.program)[\"_program\"];\n\n        if (!this._wvpPosition) {\n            this._wvpPosition = this._gl.getUniformLocation(program, \"wvpMatrix\");\n            this._positionAttribute = this._gl.getAttribLocation(program, \"position\");\n            this._uvAttribute = this._gl.getAttribLocation(program, \"uv\");\n            var textureIndex = this._gl.getUniformLocation(program, \"textureSampler\");\n            this._gl.uniform1i(textureIndex, 0);\n        }\n\n        this._gl.enable(this._gl.BLEND);\n        this._gl.blendFunc(this._gl.SRC_ALPHA, this._gl.ONE);\n        this._gl.blendEquation(this._gl.FUNC_ADD);\n        this._gl.depthMask(false);\n    }\n\n    public setRenderState(pass:MaterialPassData, renderable:RenderableBase, stage:Stage, camera:Camera, viewProjection:Matrix3D)\n    {\n        this._matrix.copyFrom(renderable.renderSceneTransform);\n        this._matrix.append(viewProjection);\n\n        var f32 : Float32Array = new Float32Array(this._matrix.rawData);\n        this._gl.uniformMatrix4fv(this._wvpPosition, false, f32);\n\n        stage.activateBuffer(this._positionAttribute, renderable.getVertexData(TriangleSubGeometry.POSITION_DATA), renderable.getVertexOffset(TriangleSubGeometry.POSITION_DATA), \"float3\");\n        stage.activateBuffer(this._uvAttribute, renderable.getVertexData(TriangleSubGeometry.UV_DATA), renderable.getVertexOffset(TriangleSubGeometry.UV_DATA), \"float2\");\n        stage.activateTexture(0, this._texture);\n        stage.context.drawTriangles(stage.getIndexBuffer(renderable.getIndexData()), 0, renderable.numTriangles);\n\n    }\n\n    public _iDeactivate(pass:MaterialPassData, renderer:RendererBase)\n    {\n        renderer.deactivateMaterialPass(pass);\n\n        this._gl.disable(this._gl.BLEND);\n        this._gl.depthMask(true);\n    }\n}\n\nexport = GlobePass;",
    "import EventDispatcher = require(\"awayjs-core/lib/events/EventDispatcher\");\nimport WorldDataEvent = require(\"./WorldDataEvent\");\nimport WorldDataElement = require(\"./WorldDataElement\");\nimport WorldDataSet = require(\"./WorldDataSet\");\n\nimport URLLoader            = require(\"awayjs-core/lib/net/URLLoader\");\nimport URLLoaderDataFormat    = require(\"awayjs-core/lib/net/URLLoaderDataFormat\");\nimport URLRequest            = require(\"awayjs-core/lib/net/URLRequest\");\nimport URLRequestMethod        = require(\"awayjs-core/lib/net/URLRequestMethod\");\nimport Event                = require(\"awayjs-core/lib/events/Event\");\nimport IOErrorEvent            = require(\"awayjs-core/lib/events/IOErrorEvent\");\nimport HTTPStatusEvent        = require(\"awayjs-core/lib/events/HTTPStatusEvent\");\nimport ByteArray            = require(\"awayjs-core/lib/utils/ByteArray\");\n\nclass WorldData extends EventDispatcher {\n\n    private urlLoader:URLLoader;\n    private loadedCountries:Object = {};\n    private loadedHandsets:Object = {};\n\n    private currentView:string;\n    private currentHandSet:string;\n    private currentTimeType:string;\n\n    private emptyData:WorldDataSet;\n\n    constructor() {\n        super();\n    }\n\n    public load(view:string, handSet:string, timeType:string):void {\n        this.currentView = view;\n        this.currentHandSet = handSet;\n        this.currentTimeType = timeType;\n\n        if (this.urlLoader) {\n            this.urlLoader.dispose();\n            this.urlLoader = null;\n        }\n        //\n        //if (view == \"0\") {\n        //    TODO: remove when gloval data will be avaliable\n        //this.sendTestGlobalData();\n        //return;\n        //}\n\n        this.generateEmptyData();\n\n        if (!this.loadedCountries[view]) {\n            this.loadCountry();\n        } else {\n            this.checkHandSet();\n        }\n    }\n\n\n    public getNearestLocation(sourceX:number, sourceY:number, sourceZ:number, sphereRadius:number):string {\n        var bestX:number = 0;\n        var bestY:number = 0;\n        var bestZ:number = 0;\n        var distance:Number = 100000000;\n        var bestKey:number;\n\n        var country:any = this.loadedCountries[\"0\"];\n        var positions:Array<number> = country.data;\n        var countryIds:Array<number> = country.countryIds;\n        var len:number = country.numLocations;\n        for(var i:number = 0; i<len; i++) {\n            var dlat:number = -positions[i * 2];\n            var dlong:number = positions[i * 2+1];\n\n            var radX : number = dlat * Math.PI / 180;\n            var radY : number = dlong * Math.PI / 180;\n            var sinX : number = Math.sin(radX);\n            var cosX : number = Math.cos(radX);\n            var sinY : number = Math.sin(radY);\n            var cosY : number = Math.cos(radY);\n\n            var x:number = -sinY * cosX * sphereRadius;\n            var y:number = -sinX * sphereRadius;\n            var z:number = cosY * cosX * sphereRadius;\n\n            var deltaX:number = x - sourceX;\n            var deltaY:number = y - sourceY;\n            var deltaZ:number = z - sourceZ;\n            var d:number = Math.sqrt(deltaX*deltaX+deltaY*deltaY+deltaZ*deltaZ);\n            if(d<distance) {\n                bestKey = countryIds[i];\n                distance = d;\n                bestX = x;\n                bestY = y;\n                bestZ = z;\n            }\n        }\n        return bestKey.toString();\n    }\n\n    private generateEmptyData():void {\n        this.emptyData = new WorldDataSet();\n        var element:WorldDataElement = new WorldDataElement();\n        element.latitude = 0;\n        element.longitude = 0;\n\n        var hours:Array<number> = new Array<number>();\n        for (var j:number = 0; j < 24; j++) {\n            hours[j] = 0;\n        }\n        element.hourlyValues = hours;\n\n        this.emptyData.averageElementValue = 0;\n        this.emptyData.maxElementValue = 0;\n\n        this.emptyData.elements.push(element);\n    }\n\n    private loadCountry():void {\n        this.urlLoader = new URLLoader();\n        this.urlLoader.dataFormat = URLLoaderDataFormat.ARRAY_BUFFER;\n        this.urlLoader.addEventListener(IOErrorEvent.IO_ERROR, (event:IOErrorEvent) => this.ioErrorCountry(event));\n        this.urlLoader.addEventListener(Event.COMPLETE, (event:Event) => this.onLocationLoaded(event));\n        this.urlLoader.load(new URLRequest('assets/locations/' + this.currentView+'.bin'));\n    }\n\n    private onLocationLoaded(event:Event):void {\n        var loader:URLLoader = <URLLoader> event.target;\n        var bytes:ByteArray = new ByteArray();\n        bytes.setArrayBuffer(loader.data);\n        bytes.position = 0;\n\n        if (!bytes) {\n            console.error(\"WorldData::onLocationLoaded. Locations \" + this.currentView + \" is not defined\");\n            return;\n        }\n\n        var positions:Array<number> = new Array<number>();\n        var counts:Array<number> = new Array<number>();\n        var countryIds:Array<number> = new Array<number>();\n\n        //var len:number = Math.min(15000, bytes.length / 12);\n        var len:number = bytes.length / 13;\n        var minLat:number = 100000;\n        var maxLat:number = -100000;\n        var minLong:number = 100000;\n        var maxLong:number = -100000;\n\n        var k:number = 0;\n        for (var i:number = 0; i < len; i++) {\n            var lat:number = bytes.readFloat();\n            var long:number = bytes.readFloat();\n            minLat = Math.min(minLat, lat);\n            maxLat = Math.max(maxLat, lat);\n            minLong = Math.min(minLong, long);\n            maxLong = Math.max(maxLong, long);\n            positions[k++] = lat;\n            positions[k++] = long;\n            counts[i] = bytes.readUnsignedInt();\n            countryIds[i] = bytes.readUnsignedByte();\n        }\n\n        this.loadedCountries[this.currentView] = {\n            numLocations: len,\n            data: positions,\n            counts: counts,\n            countryIds: countryIds,\n            avgLat:(minLat+maxLat)*.5,\n            avgLong:(minLong+maxLong)*.5\n        };\n\n        bytes = null;\n\n        if (loader) {\n            loader.dispose();\n            loader = null;\n        }\n\n        this.checkHandSet();\n    }\n\n    private checkHandSet():void {\n        //this.loadTestHandSet();\n        //return;\n        var key:string = this.currentView + \"/\" + this.currentHandSet;\n        if (!this.loadedHandsets[key]) {\n            this.urlLoader = new URLLoader();\n            this.urlLoader.dataFormat = URLLoaderDataFormat.ARRAY_BUFFER;\n            this.urlLoader.addEventListener(IOErrorEvent.IO_ERROR, (event:IOErrorEvent) => this.ioError(event));\n            this.urlLoader.addEventListener(Event.COMPLETE, (event:Event) => this.onHandSetLoaded(event));\n            this.urlLoader.load(new URLRequest('assets/counts/' + key+'.bin'));\n        } else {\n            this.loadHandSet();\n        }\n    }\n\n    private loadTestHandSet():void {\n        var country:any = this.loadedCountries[this.currentView];\n        var positions:Array<number> = country.data;\n\n        var key:string = this.currentView + \"/\" + this.currentHandSet;\n        var countHourData:WorldDataSet = new WorldDataSet();\n        this.loadedHandsets[key] = countHourData;\n\n        var len:number = country.numLocations;\n        var k:number = 0;\n        var average:number = 0;\n        var max:number = 0;\n\n        for (var i:number = 0; i < len; i++) {\n            var total : number = 0;\n            var element:WorldDataElement = new WorldDataElement();\n            element.latitude = -positions[i * 2];\n            element.longitude = positions[i * 2+1];\n\n\n            var hours:Array<number> = new Array<number>();\n            for (var j:number = 0; j < 24; j++) {\n                var value:number = .1 + Math.abs(Math.pow((Math.sin((j + element.latitude + element.longitude * .7) / 30) + Math.cos(element.latitude * element.longitude / 1000 + j)) * .5, 3));\n                hours[j] = value;\n                total += value;\n                if (value > max) max = value;\n            }\n            element.hourlyValues = hours;\n            if(total == 0) {\n                k++;\n            }\n\n            countHourData.elements.push(element);\n\n            average += total;\n        }\n\n        // TODO: could calculate avg lat/long here as well, so 3D view doesn't have to loop again\n        countHourData.maxElementValue = max;\n        countHourData.averageElementValue = average / (len * 24);   // who knows, this might be useful to detect outliers\n\n        //console.log(\"Len: \"+countHourData.length);\n        //console.log(\"K: \"+k);\n        //average /= 24;\n        //console.log(\"WorldData. Average value: \"+average);\n\n        this.loadHandSet();\n    }\n\n    private onHandSetLoaded(event:Event):void {\n        var loader:URLLoader = <URLLoader> event.target;\n        var bytes:ByteArray = new ByteArray();\n        bytes.setArrayBuffer(loader.data);\n\n        if (!bytes) {\n            console.error(\"WorldData::onHandSetLoaded. HandSet \" + this.currentHandSet + \" is not defined for view id(country): \" + this.currentView);\n            return;\n        }\n\n        var country:any = this.loadedCountries[this.currentView];\n        var positions:Array<number> = country.data;\n\n        var key:string = this.currentView + \"/\" + this.currentHandSet;\n        var countHourData:WorldDataSet = new WorldDataSet();\n        this.loadedHandsets[key] = countHourData;\n\n        var len:number = country.numLocations;\n        var k:number = 0;\n        var average:number = 0;\n        var max:number = 0;\n\n        for (var i:number = 0; i < len; i++) {\n            var total : number = 0;\n            var element:WorldDataElement = new WorldDataElement();\n            element.latitude = -positions[i * 2];\n            element.longitude = positions[i * 2+1];\n\n            var hours:Array<number> = new Array<number>();\n            for (var j:number = 0; j < 24; j++) {\n                var value:number = bytes.readUnsignedByte();\n                hours[j] = value;\n                total += value;\n                if (value > max) max = value;\n            }\n            element.hourlyValues = hours;\n            if(total == 0) {\n                k++;\n            }\n\n            countHourData.elements.push(element);\n\n            average += total;\n        }\n\n        // TODO: could calculate avg lat/long here as well, so 3D view doesn't have to loop again\n        countHourData.maxElementValue = max;\n        countHourData.averageElementValue = average / (len * 24);   // who knows, this might be useful to detect outliers\n\n        //console.log(\"Len: \"+countHourData.length);\n        //console.log(\"K: \"+k);\n        //average /= 24;\n        //console.log(\"WorldData. Average value: \"+average);\n\n        bytes = null;\n\n        if (loader) {\n            loader.dispose();\n            loader = null;\n        }\n\n        this.loadHandSet();\n    }\n\n    private loadHandSet():void {\n        var worldEvent:WorldDataEvent = new WorldDataEvent(WorldDataEvent.LOADED);\n        var key:string = this.currentView + \"/\" + this.currentHandSet;\n        worldEvent.data = this.loadedHandsets[key];\n        this.dispatchEvent(worldEvent);\n    }\n\n    private ioErrorCountry(event:IOErrorEvent):void {\n        var loader:URLLoader = <URLLoader> event.target;\n        console.error('WorldData.ioErrorCountry', loader.url);\n        var worldEvent:WorldDataEvent = new WorldDataEvent(WorldDataEvent.NO_COUNTRY_DATA);\n        worldEvent.data = this.emptyData;\n        this.dispatchEvent(worldEvent);\n\n    }\n\n    private ioError(event:IOErrorEvent):void {\n        var loader:URLLoader = <URLLoader> event.target;\n        console.error('WorldData.ioError', loader.url);\n\n        var worldEvent:WorldDataEvent = new WorldDataEvent(WorldDataEvent.NO_VENDOR_DATA);\n\n        var country:any = this.loadedCountries[this.currentView];\n        var positions:Array<number> = country.data;\n\n        var key:string = this.currentView + \"/\" + this.currentHandSet;\n        if(!this.loadedHandsets[key]) {\n            var countHourData:WorldDataSet = new WorldDataSet();\n            this.loadedHandsets[key] = countHourData;\n\n            var len:number = country.numLocations;\n            for (var i:number = 0; i < len; i++) {\n                var element:WorldDataElement = new WorldDataElement();\n                element.latitude = positions[i * 2];\n                element.longitude = positions[i * 2 + 1];\n\n                var hours:Array<number> = new Array<number>();\n                for (var j:number = 0; j < 24; j++) {\n                    hours[j] = 0;\n                }\n                element.hourlyValues = hours;\n                countHourData.elements.push(element);\n            }\n\n            countHourData.maxElementValue = 0;\n            countHourData.averageElementValue = 0;\n        }\n\n        worldEvent.data = this.loadedHandsets[key];\n        this.dispatchEvent(worldEvent);\n    }\n\n}\nexport = WorldData;",
    "class WorldDataElement {\n    public latitude:number;\n    public longitude:number;\n    // 24 of them:\n    public hourlyValues:number[];\n}\nexport = WorldDataElement;\n",
    "import IAsset                               = require(\"awayjs-core/lib/library/IAsset\");\nimport Event                                = require(\"awayjs-core/lib/events/Event\");\nimport WorldDataElement                     = require(\"./WorldDataElement\");\nimport WorldDataSet                         = require(\"./WorldDataSet\");\n\nclass WorldDataEvent extends Event {\n    public static LOADED:string = \"loadEvent\";\n    public static NO_COUNTRY_DATA:string = \"noCountryData\";\n    public static NO_VENDOR_DATA:string = \"noVendorData\";\n    public static FIND_LOCATION:string = \"findLocation\";\n    public static SHOW_GLOBAL_LOCATION:string = \"showGlobalLocation\";\n\n    public data:WorldDataSet;\n    public lat:number;\n    public long:number;\n    public x:number;\n    public y:number;\n    public z:number;\n    public sphereRadius:number;\n\n    constructor(type:string) {\n        super(type);\n    }\n\n    public clone():Event {\n        return <Event> new WorldDataEvent(this.type);\n    }\n}\n\nexport = WorldDataEvent;",
    "import WorldDataElement = require(\"./WorldDataElement\");\n\nclass WorldDataSet\n{\n    public elements:Array<WorldDataElement>;\n    public maxElementValue:number = 0;\n    public averageElementValue:number = 0;\n\n    constructor()\n    {\n        this.elements = new Array<WorldDataElement>();\n    }\n}\n\nexport = WorldDataSet;\n"
  ]
}